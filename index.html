<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<title></title>

<!-- https://yihui.name/en/2018/07/latex-math-markdown/-->
<!-- Just one possible MathJax CDN below. You may use others. -->
<!--<script async src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML"async></script>-->
<!--<script src="//yihui.name/js/math-code.js"></script>-->


<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.js"></script>

<!-- better use rmarkdown internal syntax highlighting -->
<!--<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/default.min.css"> 
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/languages/r.min.js">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>--->
<!-- down before body tag -->
<!--<script>hljs.initHighlightingOnLoad();</script>-->

<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<style type="text/css">
pre, code {
  background-color: #f7f7f7;
  border-radius: 3px;
  color: #333;
  white-space: pre-wrap;    
}
pre {
  border-radius: 3px;
  margin: 5px 0px 10px 0px;
  padding: 10px;
}
pre:not([class]) {
  background-color: white;
}
code:not([class]) {
  background-color: white;
}
code {
  font-family: Consolas, Monaco, 'Courier New', monospace;
  font-size: 85%;
}
p > code, li > code {
  padding: 2px 0px;
}
</style>

</head>
<body>
<div class = "wrapper">
<!--header-->
<div class="ui top attached inverted menu">
<div class="item">
CSS Workshop
</div>
<p><a id="toggle_menu" class="item"> <i class="sidebar icon"></i> Menu </a></p>
</div>
<div id="uisidebar" class="ui thin left grey vertical visible menu overlay sidebar" style="min-height: 100vh; background-color: #C1C8D1A9;">
<p><a class="item" href="#00_info" data-tab="00_info" data-toggle="tab" data-value="00_info"> <i class="info circle icon"></i> Info </a> <a class="item" href="#01_intro" data-tab="01_intro" data-toggle="tab" data-value="01_intro"> <i class="registered icon"></i> Basics </a> <a class="item" href="#02_tidyverse" data-tab="02_tidyverse" data-toggle="tab" data-value="02_tidyverse"> <i class="server icon"></i> Dplyr </a> <a class="item" href="#03_ggplot2" data-tab="03_ggplot2" data-toggle="tab" data-value="03_ggplot2"> <i class="line chart icon"></i> GGplot2 </a> <a class="item" href="#04_analysis" data-tab="04_analysis" data-toggle="tab" data-value="04_analysis"> <i class="pie chart icon"></i> Analysis </a> <a class="item" href="#about" data-tab="about" data-toggle="tab" data-value="about"> <i class="user icon"></i> About </a></p>
</div>
<div class="pusher container" style="min-height: 1500vh;">
<div class="ui segment" style="min-height: 1500vh;">
<div class="ui stackable container grid">

<div id="#00_info" class="ui active tab tab-pane container" role="tabpanel" style="height: 100%;" data-tab="00_info">
<div class="ui padded grid">
<div class="sixteen wide column">
<p><br> <br></p>
<h1>
Einführung in Computational Social Science mit R
</h1>
<p><br></p>
<h3>
Course Description
</h3>
<p>Dies ist ein 5 Stunden Einführungsworkshop für Sozialwissenschaftler der für die Uni Stuttgart 9.11.2018 konzipiert wurde.</p>
<p>Dieser anwendungsorientierte Workshop für Sozialwissenschaftler ist konzipiert für Personen mit wenig Programmiererfahrung mit der Statistik-Software R. Gemeinsam bearbeiten wir den PIRUS Datensatz, welcher Informationen auf individueller Ebene zu Hintergründen, Attributen und Radikalisierungsprozessen von über 1.800 politischen Extremisten in den USA beinhaltet. Ziel des Workshop ist, dass die Studierenden selbst eine Analyse in R durchgeführt haben um danach eigene Fragestellungen untersuchen zu können. Dazu werden wir sowohl moderne Tools zur Datenverarbeitung und Visualisierung benutzen, als auch erste statistische Modelle implementieren. Statistische Vorkenntnisse sind zwar von Vorteil, müssen aber nicht vorhanden sein. Der Workshop findet am 09.11.2018 von 9-16 Uhr im CIP Pool der Breitscheidtstraße (Politikwissenschaft) statt.</p>
<p>Wenn euer Interesse geweckt ist, meldet euch bitte unter folgendem Link an damit ihr auf die Kursmaterialien zugreifen könnt:</p>
<p><br></p>
<center>
<!-- <a href = "https://goo.gl/forms/72Zny402mPqW5na72", target = "_blank"> -->
<!--   <button class="ui center aligned secondary button">Sign up</button> -->
<!-- </a> -->
<a href = "https://github.com/favstats/css_workshop", target = "_blank">
<button class="ui center aligned icon button">
<i class="github icon"></i> Github
</button>
</a> <a href = "https://rstudio.cloud/spaces/6163/join?access_code=LbeO0T%2F1q9AJn2ssnDNWox2P8ojVrxDQaIckRlmv", target = "_blank">
<button class="ui center aligned primary icon button">
<i class="registered icon"></i> Cloud
</button>
</a>
</center>
<p><br> <br></p>
<p>Alle weiteren Informationen findet ihr in unserer Facebook-Gruppe: <a href="https://www.facebook.com/groups/rstuttgart/" class="uri">https://www.facebook.com/groups/rstuttgart/</a></p>
<p>Wir freuen uns auf euer Erscheinen,</p>
<p>die R User Group Stuttgart</p>
<h2>
Tools
</h2>
<div class="ui tiny images">
<p><img src="images/rstudio.png"> <img src="images/r_logo.png"></p>
</div>
<p><img class="ui small image" src=""></p>
<h2>
Packages
</h2>
<div class="ui tiny images">
<p><img src="images/tidyverse.png"> <img src="images/dplyr.png"> <img src="images/ggplot2.png"> <img src="images/pip.jpg"> <img src="images/readr.png"></p>
</div>
<h2 class="ui disabled header">
Not covered in this Workshop
</h2>
<div class="ui tiny images">
<p><img src="images/purrr.png"> <img src="images/forcats.png"> <img src="images/stringr.png"> <img src="images/tidyr.png"> <img src="images/lubridate.png"></p>
</div>
<h2>
Workflow
</h2>
<p><img class="ui large image" src="images/workflow.png"></p>
<ol style="list-style-type: decimal">
<li>Import data into R: read_csv(), readLines(), read_delim()</li>
<li>Tidy data - variables per column, observation by row</li>
<li>Tranform with dplyr</li>
<li>Visualize with ggplot2</li>
</ol>
<p>(Wickham and Grolemund, 2017)</p>
<p><br></p>
</div>
</div>
</div>
<div role="tabpanel" style="height: 100%;" class="ui  tab tab-pane container" id="#01_intro" data-tab="01_intro">
<div class="ui padded grid">
<div class="sixteen wide column">
<p><br> <br></p>
<h1 id="grundlagen">Grundlagen</h1>
<p>Zunächst einmal die Basics zu Rmarkdown.</p>
<p>Das ist ein Chunk:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(<span class="st">&quot;Hello World!&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;Hello World!&quot;</code></pre>
<p>Klick doch einfach mal auf den grünen “Play” Button.</p>
<h3 id="r-als-taschenrechner">R als Taschenrechner</h3>
<ul>
<li><code>+</code> addieren</li>
<li><code>-</code> subtrahieren</li>
<li><code>*</code> multiplizieren</li>
<li><code>/</code> dividieren</li>
<li><code>^</code> exponieren</li>
</ul>
<p><strong>Aufgaben:</strong></p>
<ol style="list-style-type: decimal">
<li><p>34+77</p></li>
<li><p>(500 geteilt durch 125) plus 3 mal 6 hoch 2</p></li>
<li><p>Berechne die Differenz zwischen 2018 und dem Jahr, an dem du begonnen hast zu studieren und dividiere das durch die Differenz zwischen 2018 und dem Jahr, in dem du geboren wurdest. Multipliziere dies mit 100, um den Prozentsatz deines Lebens zu erhalten, den du an die Uni verbracht hast.</p></li>
</ol>
<h3 id="objekte-und-zuweisung">Objekte und Zuweisung</h3>
<p>In R kann man je nach Rechenleistung zehntausende Datensätze auf einmal laden und verarbeiten. Das wird möglich da jeder Datensatz seinen eigenen Namen besitzt. Dieser muss mit einem Buchstaben beginnen, kann aber durchaus auch . oder _ oder Zahlen enthalten. Um einem Objekt einen Namen zuzuweisen wird das Zeichen &lt;- (Zuweisungspfeil) eingesetzt. Objekte können einzelne Zahlen, Variablen oder auch Datensätze sein. Mit den Objektennamen können Daten jeglicher Art abgespeichert und abgerufen werden.</p>
<p><strong>Führe einfach mal den folgenden Chunk aus!</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">2</span>   <span class="co">#definiere x als 1</span>

x</code></pre></div>
<pre><code>## [1] 2</code></pre>
<p><strong>Aufgaben:</strong></p>
<ol start="4" style="list-style-type: decimal">
<li>Erstelle ein neues Objekt y mit deiner Lieblingszahl. Addiere x und y und speichere das Ergebnis in z. Gebe z aus!</li>
</ol>
<h3 id="wichtige-operatoren">Wichtige Operatoren</h3>
<p><strong>Boolean</strong></p>
<ul>
<li><code>&amp;</code> (logisch) und</li>
<li><code>|</code> (logisch) oder</li>
<li><code>!</code> (logisch) nicht</li>
</ul>
<p><strong>Weitere Operatoren</strong></p>
<ul>
<li><code>==</code> (logisch) ist gleich</li>
<li><code>!=</code> (logisch) ist ungleich</li>
<li><code>%in%</code> Vektor ist gleich</li>
<li><code>&gt;</code> größer als</li>
<li><code>&lt;</code> kleiner als</li>
<li><code>&gt;=</code> größer gleich</li>
<li><code>&lt;=</code> kleiner gleich</li>
<li><code>is.na()</code> ist gleich NA (fehlender Wert)</li>
<li><code>!is.na()</code> ist ungleich NA</li>
</ul>
<p><strong>Beispiele</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">3</span> <span class="op">==</span><span class="st"> </span><span class="dv">3</span>    <span class="co">#ist 3 gleich 3?</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">4</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span>     <span class="co">#ist 4 größer als 5?</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="st">&quot;albert&quot;</span> <span class="op">==</span><span class="st"> &quot;albert&quot;</span>   <span class="co">#ist albert gleich albert vor?</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>R gibt hier entweder <code>TRUE</code> oder <code>FALSE</code> aus, abhängig davon ob der benutzte logische Operator zutrifft oder nicht.</p>
<h3 id="vektoren-i">Vektoren I</h3>
<p>Vektoren in R sind einfach mehrere Werte die aneinander gebunden werden. Diese können Zahlen aber auch strings (Buchstabenfolgen) sein. Hilfreich dabei ist die <code>c()</code> Funktion (c steht für <em>concatenate</em> = verketten auf Deutsch).</p>
<p><strong>Beispiele:</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">8</span>)</code></pre></div>
<pre><code>## [1] 4 1 3 4 8</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vektor &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">8</span>) <span class="co">#definiere Vektor mit den Werten 4, 1, 3, 4 und 8</span>

vektor</code></pre></div>
<pre><code>## [1] 4 1 3 4 8</code></pre>
<p>Operatoren können auch ganz einfach mit Vektoren angewandt werden.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vektor <span class="op">*</span><span class="st"> </span>vektor     <span class="co">#vektor mit sich selbst mal nehmen</span></code></pre></div>
<pre><code>## [1] 16  1  9 16 64</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vektor <span class="op">==</span><span class="st"> </span>vektor    <span class="co">#sind alle Werte von vektor gleich alle Werte von vektor?</span></code></pre></div>
<pre><code>## [1] TRUE TRUE TRUE TRUE TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vektor <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">8</span>) <span class="co">#kommen 4 oder 8 in vektor vor?</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE FALSE  TRUE  TRUE</code></pre>
<p><strong>Aufgabe</strong></p>
<ol start="5" style="list-style-type: decimal">
<li>Bilde einen Vektor mit dem Namen <code>cm</code> und den folgenden Größen in Zentimeter:</li>
</ol>
<ul>
<li><code>190</code></li>
<li><code>152</code></li>
<li><code>174</code></li>
</ul>
<p>Teile dann <code>cm</code> durch Hundert um die Größen in Meter zu erhalten!</p>
<p>Wollen wir auf einen bestimmten Wert in unserem Vektor zugreifen, dann benutzen wir <strong>eckige Klammern</strong> <code>[...]</code> auf die folgende Art und Weise:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vektor     </code></pre></div>
<pre><code>## [1] 4 1 3 4 8</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vektor[<span class="dv">3</span>]  <span class="co">#gibt uns das dritte Element von vektor aus</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vektor[<span class="dv">5</span>]  <span class="co">#gibt uns das fünfte Element von vektor aus</span></code></pre></div>
<pre><code>## [1] 8</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vektor[<span class="dv">1</span>] <span class="op">/</span><span class="st"> </span>vektor[<span class="dv">4</span>] <span class="co">#teile die erste Stelle von vektor durch die fünfte Stelle von vektor</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<h3 id="funktionen">Funktionen</h3>
<p>Das Ziel einer Funktion ist es Daten zu verarbeiten. Dazu gibt es einen <em>input</em> und einen <em>output</em>.</p>
<p>Definieren wir doch mal eine Funktion, welche Werte die man als <em>input</em> eingibt wieder quadriert als <em>output</em> gibt. Dazu benutzen wir <code>function()</code> und bestimmen dabei die Argumente welche wir jeweils eintippen wollen. Die Funktion selber wird in geschweiften Klammern <code>{}</code> codiert.</p>
<p><strong>Beispiele:</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">quadrieren &lt;-<span class="st"> </span><span class="cf">function</span>(input) { 
  output &lt;-<span class="st"> </span>input<span class="op">^</span><span class="dv">2</span>        <span class="co">#nehme den input hoch 2 und speichere ihn in output</span>
  <span class="kw">return</span>(output)                   <span class="co">#gebe output aus</span>
}

<span class="co">#Funktion ausprobieren!</span>
<span class="kw">quadrieren</span>(<span class="dv">9</span>)   </code></pre></div>
<pre><code>## [1] 81</code></pre>
<p>Wir können auch zwei oder mehrere Argumente zu einer Funktion hinzufügen. Probieren wir das gleiche doch mal mit einer Funktion die jeder aus dem Physik - Unterricht kennen sollte:</p>
<p><strong>Distanz = Geschwindigkeit * Zeit</strong></p>
<p><span class="math display">\[Distanz = Geschwindigkeit \times Zeit\]</span></p>
<p>bzw.</p>
<p><span class="math display">\[s  = v * t\]</span></p>
<p><strong>s = v * t</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">distanz &lt;-<span class="st"> </span><span class="cf">function</span>(v, t) {
 s &lt;-<span class="st"> </span>v <span class="op">*</span><span class="st"> </span>t       <span class="co">#v mal t und definiere deren Ergebnis als s</span>
 s                <span class="co">#gebe s aus</span>
}

<span class="co">#Funktion ausprobieren!</span>
<span class="kw">distanz</span>(<span class="dt">v =</span> <span class="dv">50</span>, <span class="dt">t =</span> <span class="dv">6</span>)</code></pre></div>
<pre><code>## [1] 300</code></pre>
<p>Nun müssen wir allerdings nicht immer selber Funktionen definieren. Im Gegenteil! <code>Base R</code> und die vielen Packages haben unzählige Funktionen, die Datenverarbeitung einfach machen. Beispielsweise gibt <code>mean()</code> den Mittelwert eines Vektors aus und <code>sd()</code> gibt die Standardabweichung.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vektor2 &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span>
<span class="kw">mean</span>(vektor2)   <span class="co">#gib den Mittelwert von vektor aus</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sd</span>(vektor2)     <span class="co">#gib die Standardabweichung von vektor aus</span></code></pre></div>
<pre><code>## [1] 1.581139</code></pre>
<h3 id="vektoren-ii">Vektoren II</h3>
<p>Nun eine kleine Übersicht über die Arten von Vektoren:</p>
<p><strong>Es gibt drei Hauptgruppen</strong></p>
<ul>
<li><strong>Character:</strong> aka “String” oder ‘String’, ist einfach nur Text.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">char &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Männlich&quot;</span>, <span class="st">&quot;Weiblich&quot;</span>)
<span class="kw">class</span>(char)</code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<ul>
<li><strong>Factor:</strong> Factors können eine Reihenfolge haben sogennante <em>Levels</em>.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fac &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;Männlich&quot;</span>, <span class="st">&quot;Weiblich&quot;</span>))
<span class="kw">class</span>(fac)</code></pre></div>
<pre><code>## [1] &quot;factor&quot;</code></pre>
<ul>
<li><strong>Numeric:</strong> Jeglicher Zahleninput mit dem man rechnen kann.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">num &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)
<span class="kw">class</span>(num)</code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<p><strong>Transformation zwischen den Datentypen</strong></p>
<ul>
<li><code>as.character()</code></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.character</span>(num)</code></pre></div>
<pre><code>## [1] &quot;1&quot; &quot;2&quot; &quot;3&quot;</code></pre>
<ul>
<li><code>as.factor()</code></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.factor</span>(char)</code></pre></div>
<pre><code>## [1] Männlich Weiblich
## Levels: Männlich Weiblich</code></pre>
<ul>
<li><code>as.numeric()</code></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.numeric</span>(fac)</code></pre></div>
<pre><code>## [1] 1 2</code></pre>
<h3 id="dataframes">Dataframes</h3>
<p>Die meiste Zeit werden wir in R nicht mit Vektoren arbeiten, sondern mit <em>dataframes</em>. Dataframes sind letztendlich einfach nur angeordnete Vektoren und essentiell wichtig für die Datenanalyse.</p>
<p><strong>Lasst uns mal einen Beispieldatensatz einladen.</strong></p>
<h2 id="profiles-of-individual-radicalization-in-the-united-states-pirus">Profiles of Individual Radicalization in the United States (PIRUS)</h2>
<div class="figure">
<img src="https://start.umd.edu/sites/default/files/logo.png" />

</div>
<ul>
<li><a href="https://start.umd.edu/data-tools/profiles-individual-radicalization-united-states-pirus"><strong>Link zum Datensatz</strong></a></li>
<li><a href="https://start.umd.edu/data-and-tools/start-datasets"><strong>Andere Open Source datasets</strong></a></li>
</ul>
<p>Profiles of Individual Radicalization in the United States (PIRUS) ist eine Datenbank mit 1.867 islamistischen, extrem linken und extrem rechten Extremisten, die von 1948 bis 2016 zu gewalttätigem und gewaltfreiem Extremismus in den Vereinigten Staaten radikalisiert haben. Die Datenbank steht auf der START-Webseite kostenlos zum Download zur Verfügung.</p>
<p>Zunächst laden wir den Datensatz ein</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">load</span>(<span class="st">&quot;start_pirus.Rdata&quot;</span>)</code></pre></div>
<p>Hier ein kleiner Ausschnitt aus dem Datensatz:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus</code></pre></div>
<p><strong>Codebook</strong></p>
<table>
<thead>
<tr class="header">
<th>Variablen</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>subject_id</td>
<td>ID der Person</td>
</tr>
<tr class="even">
<td>date</td>
<td>Datum</td>
</tr>
<tr class="odd">
<td>age</td>
<td>Alter</td>
</tr>
<tr class="even">
<td>male</td>
<td>Geschlecht (weiblich/männlich)</td>
</tr>
<tr class="odd">
<td>student</td>
<td>Student (0/1)</td>
</tr>
<tr class="even">
<td>married</td>
<td>Verheiratet (0/1)</td>
</tr>
<tr class="odd">
<td>unemployed</td>
<td>Arbeitslos (0/1)</td>
</tr>
<tr class="even">
<td>mental</td>
<td>Mentale Probleme (0/1)</td>
</tr>
<tr class="odd">
<td>abuse_child</td>
<td>Als Kind misshandelt (0/1)</td>
</tr>
<tr class="even">
<td>crime_history</td>
<td>Kriminelle Vergangenheit (0/1)</td>
</tr>
<tr class="odd">
<td>violent</td>
<td>Gewalttätiger Plan (0/1)</td>
</tr>
<tr class="even">
<td>extent</td>
<td>Fortgeschrittenheit Planung (0-5)</td>
</tr>
<tr class="odd">
<td>terror_group</td>
<td>Gruppe</td>
</tr>
<tr class="even">
<td>radicalization</td>
<td>Wie stark überzeugt? (1-5)</td>
</tr>
<tr class="odd">
<td>clique</td>
<td>Extremistische Clique (0/1)</td>
</tr>
<tr class="even">
<td>terror_type</td>
<td>Ideologie</td>
</tr>
</tbody>
</table>
<p>Eine Sache fällt dir vielleicht auch auf: das Kürzel <em>NA</em> steht für <em>Not Available</em> und symbolisiert missing values oder fehlende Werte.</p>
<p><strong>Datenzugriff</strong></p>
<p>Sehr angenehm kann man auf einzelne Variablen mit Hilfe des Dollarzeichens in der Form <code>data$variable</code> zugegriffen werden.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(start_pirus<span class="op">$</span>terror_group)   <span class="co">#zeige die ersten 5 Stellen von terror_group</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus<span class="op">$</span>terror_group[<span class="dv">1</span>]      <span class="co">#zeige die erste Stelle von terror_group</span></code></pre></div>
<pre><code>## [1] &quot;al-Qaeda core&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus<span class="op">$</span>terror_group[<span class="dv">250</span>]    <span class="co">#zeige die 250. Stelle von terror_group</span></code></pre></div>
<pre><code>## [1] &quot;Animal Liberation Front (ALF)&quot;</code></pre>
<p><strong>Mean</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(start_pirus<span class="op">$</span>age, <span class="dt">na.rm =</span> T)</code></pre></div>
<pre><code>## [1] 33.61223</code></pre>
<p><strong>Aufgabe</strong></p>
<p>Benutze die folgenden Funktionen mit der Variable Alter:</p>
<ul>
<li><code>min()</code></li>
<li><code>max()</code></li>
<li><code>sd()</code></li>
<li><code>hist()</code></li>
</ul>
<p><strong>Summary</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(start_pirus)</code></pre></div>
<pre><code>##    subject_id        date                 age             male       
##  Min.   :1000   Min.   :1948-07-20   Min.   :15.00   Min.   :0.0000  
##  1st Qu.:3550   1st Qu.:1985-04-15   1st Qu.:24.00   1st Qu.:1.0000  
##  Median :4562   Median :2002-01-05   Median :30.00   Median :1.0000  
##  Mean   :4575   Mean   :1997-08-07   Mean   :33.61   Mean   :0.9024  
##  3rd Qu.:5827   3rd Qu.:2010-10-28   3rd Qu.:41.00   3rd Qu.:1.0000  
##  Max.   :9411   Max.   :2016-12-23   Max.   :88.00   Max.   :1.0000  
##                                      NA&#39;s   :83                      
##      gender         married          student         unemployed   
##  Min.   :1.000   Min.   :0.0000   Min.   :0.0000   Min.   :0.000  
##  1st Qu.:2.000   1st Qu.:0.0000   1st Qu.:0.0000   1st Qu.:0.000  
##  Median :2.000   Median :0.0000   Median :0.0000   Median :0.000  
##  Mean   :1.902   Mean   :0.3965   Mean   :0.2453   Mean   :0.104  
##  3rd Qu.:2.000   3rd Qu.:1.0000   3rd Qu.:0.0000   3rd Qu.:0.000  
##  Max.   :2.000   Max.   :1.0000   Max.   :1.0000   Max.   :1.000  
##                  NA&#39;s   :788      NA&#39;s   :805                     
##      mental        abuse_child          crime_history    violent      
##  Min.   :0.0000   Min.   :0.00000   None       :611   Min.   :0.0000  
##  1st Qu.:0.0000   1st Qu.:0.00000   Non-Violent:205   1st Qu.:0.0000  
##  Median :0.0000   Median :0.00000   Violent    :195   Median :1.0000  
##  Mean   :0.1019   Mean   :0.05684   NA&#39;s       :854   Mean   :0.5898  
##  3rd Qu.:0.0000   3rd Qu.:0.00000                     3rd Qu.:1.0000  
##  Max.   :1.0000   Max.   :3.00000                     Max.   :1.0000  
##                                                                       
##      extent      terror_group       radicalization      clique      
##  Min.   :0.000   Length:1865        Min.   :0.000   Min.   :0.0000  
##  1st Qu.:0.000   Class :character   1st Qu.:3.000   1st Qu.:0.0000  
##  Median :1.000   Mode  :character   Median :5.000   Median :1.0000  
##  Mean   :2.069                      Mean   :3.863   Mean   :0.5179  
##  3rd Qu.:5.000                      3rd Qu.:5.000   3rd Qu.:1.0000  
##  Max.   :5.000                      Max.   :5.000   Max.   :1.0000  
##  NA&#39;s   :27                         NA&#39;s   :193     NA&#39;s   :664     
##        terror_type       year     
##  Single Issue:340   Min.   :1948  
##  Far Left    :324   1st Qu.:1985  
##  Far Right   :746   Median :2002  
##  Islamism    :455   Mean   :1997  
##                     3rd Qu.:2010  
##                     Max.   :2016  
## </code></pre>
<p><strong>Indexieren mit eckigen Klammern</strong></p>
<p>Wollen wir auf verschiedene Reihen oder Spalten des dataframes zugreifen, können wir das in folgenderweise tun</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus[<span class="dv">1</span>, ]        <span class="co">#1. Reihe</span>
start_pirus[, <span class="dv">2</span>]        <span class="co">#2. Spalte</span>

start_pirus[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dv">4</span>]    <span class="co">#die ersten 10 Reihen und die vierte Spalte</span></code></pre></div>
<p><strong>Aufgabe</strong></p>
<ol start="5" style="list-style-type: decimal">
<li><p>Gib die Reihe 1000 von <code>start_pirus</code> aus</p></li>
<li>Gib die Reihe 500 bis 600 und die erste Spalte von <code>start_pirus</code> aus
</div>
</div></li>
</ol>
</div>
<div id="#02_tidyverse" class="ui tab tab-pane container" role="tabpanel" style="height: 100%;" data-tab="02_tidyverse">
<div class="ui padded grid">
<div class="sixteen wide column">
<p><br> <br></p>
<h1 id="tidyverse">Tidyverse</h1>
<div class="ui tiny images">
<p><img src="images/tidyverse.png"> <img src="images/dplyr.png"></p>
</div>
<p><br></p>
<p>Neben <code>Base R</code> gibt es das <strong>Tidyverse</strong>, dass viele mächtige Packages enthält!</p>
<p>Hier eine kleine Übersicht von relevanten Funktionen, die wir brauchen werden:</p>
<table>
<thead>
<tr class="header">
<th>Bedeutung</th>
<th>tidyverse - Funktionen</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Neue Variable erstellen</td>
<td>mutate()</td>
</tr>
<tr class="even">
<td>Rekodieren (binär)</td>
<td>ifelse()</td>
</tr>
<tr class="odd">
<td>Rekodieren</td>
<td>case_when()</td>
</tr>
<tr class="even">
<td>Variablen auswählen</td>
<td>select()</td>
</tr>
<tr class="odd">
<td>Subset erstellen</td>
<td>filter()</td>
</tr>
<tr class="even">
<td>Variablennamen ändern</td>
<td>rename()</td>
</tr>
<tr class="odd">
<td>pipe operator</td>
<td>%&gt;%</td>
</tr>
<tr class="even">
<td>Datensatz gruppieren</td>
<td>group_by()</td>
</tr>
<tr class="odd">
<td>Zusammenfassen</td>
<td>summarize()</td>
</tr>
<tr class="even">
<td>Zähle die Ausprägungen</td>
<td>count()</td>
</tr>
</tbody>
</table>
<p>Zunächst einmal müssen wir das Package installieren und laden. Das geht mit in Base R mit den folgenden zwei Befehlen: <code>install.packages</code> und <code>library</code>.</p>
<p>Eine viel enstpannteres Funktion, welche Packages gleichzeitig installiert und einlädt nennt sich <code>pacman</code>. Zunächsten installieren wir es:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages(&quot;pacman&quot;)</span></code></pre></div>
<p>Wir laden dann alle packages die wir brauchen auf folgende Weise:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pacman<span class="op">::</span><span class="kw">p_load</span>(tidyverse)</code></pre></div>
<p>Wenn man ein Package nicht laden will sondern nur eine Funktion daraus, dann kann man auch zwei Doppelpunkte <code>::</code> hinter den Packagenamen schreiben und die nötige Funktion danach denotieren.</p>
<p><strong>Let’s get it started!</strong></p>
<p>Wieder zu den Beispieldaten:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">load</span>(<span class="st">&quot;start_pirus.Rdata&quot;</span>)</code></pre></div>
<h3 id="mutate">mutate</h3>
<p><strong>Neue Variablen erstellen mit mutate()</strong></p>
<p>Mit <code>mutate()</code> wird/werden eine oder mehrere neue Variable(n) erzeugt und an den Datensatz hinten angefügt.</p>
<p><strong>Beispiel</strong></p>
<p>Statt dem Alter wollen wir nun das Geburstjahr haben. Einfacherweise ziehen wir das jetzige Jahr (2018) vom Alter ab um das Geburtsjahr zu erhalten. Die neue Variable nennen wir <code>birth</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mutate</span>(start_pirus, <span class="dt">birth =</span> <span class="dv">2018</span> <span class="op">-</span><span class="st"> </span>age)</code></pre></div>
<pre><code>## # A tibble: 1,865 x 19
##    subject_id date         age  male gender married student unemployed
##         &lt;dbl&gt; &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;
##  1       1000 2002-05-08    32     1      2       1       1          0
##  2       1001 2001-11-25    20     1      2       0       1          0
##  3       1002 1997-05-01    28     1      2       1       0          0
##  4       1005 1993-04-10    25     1      2       1       0          0
##  5       1006 1993-03-04    25     1      2       0       0          0
##  6       1010 2003-03-01    27     1      2       1       0          0
##  7       1013 2002-09-10    23     1      2       1       0          1
##  8       1014 2002-09-15    28     1      2       1       0          0
##  9       1015 2002-10-21    26     1      2       1       0          0
## 10       1016 2002-09-18    25     1      2       1       0          0
## # ... with 1,855 more rows, and 11 more variables: mental &lt;dbl&gt;,
## #   abuse_child &lt;dbl&gt;, crime_history &lt;fct&gt;, violent &lt;dbl&gt;, extent &lt;dbl&gt;,
## #   terror_group &lt;chr&gt;, radicalization &lt;dbl&gt;, clique &lt;dbl&gt;,
## #   terror_type &lt;fct&gt;, year &lt;dbl&gt;, birth &lt;dbl&gt;</code></pre>
<p>Weisen wir den Datensatz wieder <code>start_pirus</code> zu, so wird unsere Veränderung auch im Objekt festgehalten</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus &lt;-<span class="st"> </span><span class="kw">mutate</span>(start_pirus, <span class="dt">birth =</span> <span class="dv">2018</span> <span class="op">-</span><span class="st"> </span>age)

start_pirus</code></pre></div>
<pre><code>## # A tibble: 1,865 x 19
##    subject_id date         age  male gender married student unemployed
##         &lt;dbl&gt; &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;
##  1       1000 2002-05-08    32     1      2       1       1          0
##  2       1001 2001-11-25    20     1      2       0       1          0
##  3       1002 1997-05-01    28     1      2       1       0          0
##  4       1005 1993-04-10    25     1      2       1       0          0
##  5       1006 1993-03-04    25     1      2       0       0          0
##  6       1010 2003-03-01    27     1      2       1       0          0
##  7       1013 2002-09-10    23     1      2       1       0          1
##  8       1014 2002-09-15    28     1      2       1       0          0
##  9       1015 2002-10-21    26     1      2       1       0          0
## 10       1016 2002-09-18    25     1      2       1       0          0
## # ... with 1,855 more rows, and 11 more variables: mental &lt;dbl&gt;,
## #   abuse_child &lt;dbl&gt;, crime_history &lt;fct&gt;, violent &lt;dbl&gt;, extent &lt;dbl&gt;,
## #   terror_group &lt;chr&gt;, radicalization &lt;dbl&gt;, clique &lt;dbl&gt;,
## #   terror_type &lt;fct&gt;, year &lt;dbl&gt;, birth &lt;dbl&gt;</code></pre>
<p><strong>Aufgabe</strong></p>
<p>Der Radikalisierungsindikator (<code>radicalization</code>) geht von 1 - 5. Z-standardisiere die variable mit <code>scale()</code> und speichere sie als <code>radicalization_z</code> ab. Mit <code>mutate()</code> wird die Variable hinten angehangen.</p>
<h3 id="ifelse">ifelse</h3>
<p>Die Funktion <code>ifelse()</code> testet eine logische Bedingung in ihrem ersten Argument. Wenn der Test <code>TRUE</code> ist, gibt <code>ifelse()</code> das zweite Argument zurück. Wenn der Test <code>FALSE</code> ist, gibt <code>ifelse()</code> das dritte Argument zurück.</p>
<p>Also in folgender Form:</p>
<p><code>ifelse(logischer Test, was passiert wenn zutrifft, was passiert wenn nicht zutrifft)</code></p>
<p>Das können wir in Kombination mit <code>mutate</code> benutzen.</p>
<p><strong>Beispiel:</strong></p>
<p>Nehmen wir an, dass wir die Altervariable als eine dummy Variable (zwei Ausprägungen) benutzen wollen. Am besten geht das mit <code>ifelse()</code>. Kodieren wir doch einmal die 18-40 Jährigen als eine Gruppe und über 40 Jährige als eine andere Gruppe.</p>
<p>Eine Variable <code>u40</code> erstellen welche die 18 bis 40 Jährigen und die über 40 Jährigen in eine Gruppe teilt.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mutate</span>(start_pirus, <span class="dt">u40 =</span> <span class="kw">ifelse</span>(age <span class="op">&lt;=</span><span class="st"> </span><span class="dv">40</span>, <span class="st">&quot;younger&quot;</span> ,<span class="st">&quot;older&quot;</span>))</code></pre></div>
<pre><code>## # A tibble: 1,865 x 20
##    subject_id date         age  male gender married student unemployed
##         &lt;dbl&gt; &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;
##  1       1000 2002-05-08    32     1      2       1       1          0
##  2       1001 2001-11-25    20     1      2       0       1          0
##  3       1002 1997-05-01    28     1      2       1       0          0
##  4       1005 1993-04-10    25     1      2       1       0          0
##  5       1006 1993-03-04    25     1      2       0       0          0
##  6       1010 2003-03-01    27     1      2       1       0          0
##  7       1013 2002-09-10    23     1      2       1       0          1
##  8       1014 2002-09-15    28     1      2       1       0          0
##  9       1015 2002-10-21    26     1      2       1       0          0
## 10       1016 2002-09-18    25     1      2       1       0          0
## # ... with 1,855 more rows, and 12 more variables: mental &lt;dbl&gt;,
## #   abuse_child &lt;dbl&gt;, crime_history &lt;fct&gt;, violent &lt;dbl&gt;, extent &lt;dbl&gt;,
## #   terror_group &lt;chr&gt;, radicalization &lt;dbl&gt;, clique &lt;dbl&gt;,
## #   terror_type &lt;fct&gt;, year &lt;dbl&gt;, birth &lt;dbl&gt;, u40 &lt;chr&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#darauf achten, dass bei strings (&#39;Wörtern&#39;) Anführungsstriche gemacht werden müssen!</span></code></pre></div>
<p><strong>Aufgabe</strong></p>
<ol start="7" style="list-style-type: decimal">
<li>Kodiere <code>male</code> in der folgenden Art und Weise und nenne die Variable <code>male_label</code>:</li>
</ol>
<p>1 = “männlich” 2 = “weiblich”</p>
<p>Überschreibe <code>start_pirus</code> zeige den Datensatz!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus &lt;-<span class="st"> </span><span class="kw">mutate</span>(start_pirus, <span class="dt">male_label =</span> <span class="kw">ifelse</span>(male <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, <span class="st">&quot;male&quot;</span> ,<span class="st">&quot;female&quot;</span>))
<span class="co">#darauf achten, dass bei strings (&#39;Wörtern&#39;) Anführungsstriche gemacht werden müssen!</span>

start_pirus </code></pre></div>
<pre><code>## # A tibble: 1,865 x 20
##    subject_id date         age  male gender married student unemployed
##         &lt;dbl&gt; &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;
##  1       1000 2002-05-08    32     1      2       1       1          0
##  2       1001 2001-11-25    20     1      2       0       1          0
##  3       1002 1997-05-01    28     1      2       1       0          0
##  4       1005 1993-04-10    25     1      2       1       0          0
##  5       1006 1993-03-04    25     1      2       0       0          0
##  6       1010 2003-03-01    27     1      2       1       0          0
##  7       1013 2002-09-10    23     1      2       1       0          1
##  8       1014 2002-09-15    28     1      2       1       0          0
##  9       1015 2002-10-21    26     1      2       1       0          0
## 10       1016 2002-09-18    25     1      2       1       0          0
## # ... with 1,855 more rows, and 12 more variables: mental &lt;dbl&gt;,
## #   abuse_child &lt;dbl&gt;, crime_history &lt;fct&gt;, violent &lt;dbl&gt;, extent &lt;dbl&gt;,
## #   terror_group &lt;chr&gt;, radicalization &lt;dbl&gt;, clique &lt;dbl&gt;,
## #   terror_type &lt;fct&gt;, year &lt;dbl&gt;, birth &lt;dbl&gt;, male_label &lt;chr&gt;</code></pre>
<h3 id="case_when">case_when</h3>
<p>Was aber wenn wir mehrere Werte rekodieren wollen? Enter the world of <code>case_when</code>.</p>
<p>Mit <code>case_when</code> können wir einzelne Variablen rekodieren und sogar Bedingungen nach Lust und Laune mixen. Hier ein Beispiel:</p>
<p>Variable Description: Prior to their radicalization, does the individual have a history of involvement in non-ideologically motivated criminal activities?</p>
<ul>
<li>0 = No previous criminal activity<br />
</li>
<li>1 = Previous (non-violent) minor criminal activity (e.g., convicted of a misdemeanor crime)</li>
<li>2 = Previous (non-violent) serious criminal activity (e.g., convicted of a felony crime)</li>
<li>3 = Previous violent crime</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus &lt;-<span class="st"> </span><span class="kw">mutate</span>(start_pirus, <span class="dt">crime_history =</span> <span class="kw">case_when</span>(
    crime_history <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">~</span><span class="st"> &quot;None&quot;</span>,
    crime_history <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">~</span><span class="st"> &quot;Non-Violent&quot;</span>,
    crime_history <span class="op">==</span><span class="st"> </span><span class="dv">2</span> <span class="op">~</span><span class="st"> &quot;Non-Violent&quot;</span>,
    crime_history <span class="op">==</span><span class="st"> </span><span class="dv">3</span> <span class="op">~</span><span class="st"> &quot;Violent&quot;</span>
  )) 

start_pirus</code></pre></div>
<pre><code>## # A tibble: 1,865 x 20
##    subject_id date         age  male gender married student unemployed
##         &lt;dbl&gt; &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;
##  1       1000 2002-05-08    32     1      2       1       1          0
##  2       1001 2001-11-25    20     1      2       0       1          0
##  3       1002 1997-05-01    28     1      2       1       0          0
##  4       1005 1993-04-10    25     1      2       1       0          0
##  5       1006 1993-03-04    25     1      2       0       0          0
##  6       1010 2003-03-01    27     1      2       1       0          0
##  7       1013 2002-09-10    23     1      2       1       0          1
##  8       1014 2002-09-15    28     1      2       1       0          0
##  9       1015 2002-10-21    26     1      2       1       0          0
## 10       1016 2002-09-18    25     1      2       1       0          0
## # ... with 1,855 more rows, and 12 more variables: mental &lt;dbl&gt;,
## #   abuse_child &lt;dbl&gt;, crime_history &lt;chr&gt;, violent &lt;dbl&gt;, extent &lt;dbl&gt;,
## #   terror_group &lt;chr&gt;, radicalization &lt;dbl&gt;, clique &lt;dbl&gt;,
## #   terror_type &lt;fct&gt;, year &lt;dbl&gt;, birth &lt;dbl&gt;, male_label &lt;chr&gt;</code></pre>
<p>Jede Bedingung untereinander gereiht und mit einem Komma getrennt. Wenn eine Bedingung ein <code>TRUE</code> Statement ist, dann wird mit dem <code>~</code> Operator der entsprechende Wert zugewiesen. Gibt man <code>TRUE</code> selbst an, so kann man “alle anderen” Ausprägungen, die nicht vorher abgefragt worden sind einen Wert zuweisen. Gibt man die Originalvariable an, so bleiben die restlichen Werte wie sie sind.</p>
<h3 id="select">select</h3>
<p>Mit <code>select</code> werden Spalten (=Vektoren/Variablen) mittels dem Variablennamen oder einer Hilfsfunktion ausgewählt.</p>
<p>Wählen wir wieder nur die zwei folgenden Variables aus:</p>
<ul>
<li><code>age</code></li>
<li><code>gender</code></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">select</span>(start_pirus , age, gender)</code></pre></div>
<pre><code>## # A tibble: 1,865 x 2
##      age gender
##    &lt;dbl&gt;  &lt;dbl&gt;
##  1    32      2
##  2    20      2
##  3    28      2
##  4    25      2
##  5    25      2
##  6    27      2
##  7    23      2
##  8    28      2
##  9    26      2
## 10    25      2
## # ... with 1,855 more rows</code></pre>
<p><code>Select</code> eignet sich auch dafür Variablen aus einem bestehenden dataframe zu entfernen. Dies ist ganz einfach zu lösen mit einem <code>-</code> (Minus).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">select</span>(start_pirus , <span class="op">-</span>age, <span class="op">-</span>gender)</code></pre></div>
<pre><code>## # A tibble: 1,865 x 18
##    subject_id date        male married student unemployed mental
##         &lt;dbl&gt; &lt;date&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt;
##  1       1000 2002-05-08     1       1       1          0      0
##  2       1001 2001-11-25     1       0       1          0      0
##  3       1002 1997-05-01     1       1       0          0      0
##  4       1005 1993-04-10     1       1       0          0      0
##  5       1006 1993-03-04     1       0       0          0      0
##  6       1010 2003-03-01     1       1       0          0      0
##  7       1013 2002-09-10     1       1       0          1      0
##  8       1014 2002-09-15     1       1       0          0      0
##  9       1015 2002-10-21     1       1       0          0      0
## 10       1016 2002-09-18     1       1       0          0      0
## # ... with 1,855 more rows, and 11 more variables: abuse_child &lt;dbl&gt;,
## #   crime_history &lt;chr&gt;, violent &lt;dbl&gt;, extent &lt;dbl&gt;, terror_group &lt;chr&gt;,
## #   radicalization &lt;dbl&gt;, clique &lt;dbl&gt;, terror_type &lt;fct&gt;, year &lt;dbl&gt;,
## #   birth &lt;dbl&gt;, male_label &lt;chr&gt;</code></pre>
<p><strong>Aufgaben</strong></p>
<ol start="10" style="list-style-type: decimal">
<li>Wähle die folgende Variablen aus:</li>
</ol>
<ul>
<li><code>terror_group</code></li>
<li><code>terror_type</code></li>
<li><code>crime_history</code></li>
</ul>
<ol start="11" style="list-style-type: decimal">
<li>Wähle alle Variablen <strong>außer</strong> <code>student</code> und <code>age</code>.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">select</span>(start_pirus , terror_group, terror_type, crime_history)</code></pre></div>
<pre><code>## # A tibble: 1,865 x 3
##    terror_group  terror_type crime_history
##    &lt;chr&gt;         &lt;fct&gt;       &lt;chr&gt;        
##  1 al-Qaeda core Islamism    &lt;NA&gt;         
##  2 Taliban       Islamism    &lt;NA&gt;         
##  3 al-Qaeda core Islamism    &lt;NA&gt;         
##  4 &lt;NA&gt;          Islamism    &lt;NA&gt;         
##  5 &lt;NA&gt;          Islamism    &lt;NA&gt;         
##  6 al-Qaeda core Islamism    &lt;NA&gt;         
##  7 al-Qaeda core Islamism    &lt;NA&gt;         
##  8 al-Qaeda core Islamism    &lt;NA&gt;         
##  9 al-Qaeda core Islamism    &lt;NA&gt;         
## 10 al-Qaeda core Islamism    &lt;NA&gt;         
## # ... with 1,855 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">select</span>(start_pirus , <span class="op">-</span>student, <span class="op">-</span>age)</code></pre></div>
<pre><code>## # A tibble: 1,865 x 18
##    subject_id date        male gender married unemployed mental
##         &lt;dbl&gt; &lt;date&gt;     &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt;
##  1       1000 2002-05-08     1      2       1          0      0
##  2       1001 2001-11-25     1      2       0          0      0
##  3       1002 1997-05-01     1      2       1          0      0
##  4       1005 1993-04-10     1      2       1          0      0
##  5       1006 1993-03-04     1      2       0          0      0
##  6       1010 2003-03-01     1      2       1          0      0
##  7       1013 2002-09-10     1      2       1          1      0
##  8       1014 2002-09-15     1      2       1          0      0
##  9       1015 2002-10-21     1      2       1          0      0
## 10       1016 2002-09-18     1      2       1          0      0
## # ... with 1,855 more rows, and 11 more variables: abuse_child &lt;dbl&gt;,
## #   crime_history &lt;chr&gt;, violent &lt;dbl&gt;, extent &lt;dbl&gt;, terror_group &lt;chr&gt;,
## #   radicalization &lt;dbl&gt;, clique &lt;dbl&gt;, terror_type &lt;fct&gt;, year &lt;dbl&gt;,
## #   birth &lt;dbl&gt;, male_label &lt;chr&gt;</code></pre>
<h3 id="filter">filter</h3>
<p><strong>Zeilen auswählen mit filter()</strong></p>
<p>Mit <code>filter()</code> behält man oder selektiert man Zeilen eines Datensatzes, welche bestimmte logische Kriterien oder Konditionen erfüllen. Damit wird ein Subset (Untergruppe) gebildet. Wir wählen jetzt nur die Fälle aus, welche unser Kriterium erfüllen. Jetzt zeigen wir uns Personen an, welche zur <em>Far Right</em> gehören.</p>
<p><strong>Beispiel:</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(start_pirus, terror_type <span class="op">==</span><span class="st"> &quot;Far Right&quot;</span>)</code></pre></div>
<p><strong>Aufgaben</strong></p>
<ol start="12" style="list-style-type: decimal">
<li><p>Filtere den Datensatz und zeige nur die Personen, welche sich mit der <code>Ku Klux Klan</code> identifizieren.</p></li>
<li><p>Filtere den Datensatz und zeige nur die Personen, welche über 40 Jahre alt sind und eher erfolgreich waren (<code>extent &gt; 3</code>).</p></li>
<li><p>Filtere den Datensatz und zeige nur weibliche Personen, welche eine gewalttätige kriminelle Vergangenheit hatten <code>criminal_history</code>.</p></li>
</ol>
<p><em>Hier nochmal die Operatoren zum spicken ;)</em></p>
<ul>
<li><code>==</code> (logisch) ist gleich</li>
<li><code>!=</code> (logisch) ist ungleich</li>
<li><code>&gt;</code> größer als</li>
<li><code>&lt;</code> kleiner als</li>
<li><code>&gt;=</code> größer gleich</li>
<li><code>&lt;=</code> kleiner gleich</li>
</ul>
<h3 id="rename">rename</h3>
<p>Variablen umbennen mit <code>rename()</code></p>
<p>Mit <code>rename()</code> lassen sich die Variablen umbennen. Beispielhaft ?bersetzen wir <code>terror_group</code>, <code>radicalization</code> und <code>terror_type</code> Variablennamen ins Deutsche.</p>
<p><strong>Beispiel:</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rename</span>(start_pirus, <span class="dt">group =</span> terror_group,  <span class="dt">rad =</span> radicalization,  <span class="dt">ideology =</span> terror_type)</code></pre></div>
<pre><code>## # A tibble: 1,865 x 20
##    subject_id date         age  male gender married student unemployed
##         &lt;dbl&gt; &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;
##  1       1000 2002-05-08    32     1      2       1       1          0
##  2       1001 2001-11-25    20     1      2       0       1          0
##  3       1002 1997-05-01    28     1      2       1       0          0
##  4       1005 1993-04-10    25     1      2       1       0          0
##  5       1006 1993-03-04    25     1      2       0       0          0
##  6       1010 2003-03-01    27     1      2       1       0          0
##  7       1013 2002-09-10    23     1      2       1       0          1
##  8       1014 2002-09-15    28     1      2       1       0          0
##  9       1015 2002-10-21    26     1      2       1       0          0
## 10       1016 2002-09-18    25     1      2       1       0          0
## # ... with 1,855 more rows, and 12 more variables: mental &lt;dbl&gt;,
## #   abuse_child &lt;dbl&gt;, crime_history &lt;chr&gt;, violent &lt;dbl&gt;, extent &lt;dbl&gt;,
## #   group &lt;chr&gt;, rad &lt;dbl&gt;, clique &lt;dbl&gt;, ideology &lt;fct&gt;, year &lt;dbl&gt;,
## #   birth &lt;dbl&gt;, male_label &lt;chr&gt;</code></pre>
<p>Ist eine Abkürzung des folgenden Code:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus2 &lt;-<span class="st"> </span><span class="kw">rename</span>(start_pirus, <span class="dt">group =</span> terror_group)
start_pirus2 &lt;-<span class="st"> </span><span class="kw">rename</span>(start_pirus2, <span class="dt">rad =</span> radicalization)
start_pirus2 &lt;-<span class="st"> </span><span class="kw">rename</span>(start_pirus2, <span class="dt">ideology =</span> terror_type)

start_pirus2</code></pre></div>
<pre><code>## # A tibble: 1,865 x 20
##    subject_id date         age  male gender married student unemployed
##         &lt;dbl&gt; &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;
##  1       1000 2002-05-08    32     1      2       1       1          0
##  2       1001 2001-11-25    20     1      2       0       1          0
##  3       1002 1997-05-01    28     1      2       1       0          0
##  4       1005 1993-04-10    25     1      2       1       0          0
##  5       1006 1993-03-04    25     1      2       0       0          0
##  6       1010 2003-03-01    27     1      2       1       0          0
##  7       1013 2002-09-10    23     1      2       1       0          1
##  8       1014 2002-09-15    28     1      2       1       0          0
##  9       1015 2002-10-21    26     1      2       1       0          0
## 10       1016 2002-09-18    25     1      2       1       0          0
## # ... with 1,855 more rows, and 12 more variables: mental &lt;dbl&gt;,
## #   abuse_child &lt;dbl&gt;, crime_history &lt;chr&gt;, violent &lt;dbl&gt;, extent &lt;dbl&gt;,
## #   group &lt;chr&gt;, rad &lt;dbl&gt;, clique &lt;dbl&gt;, ideology &lt;fct&gt;, year &lt;dbl&gt;,
## #   birth &lt;dbl&gt;, male_label &lt;chr&gt;</code></pre>
<p>So sparen wir uns da mehrmals abspeichern! Noch besser geht das aber mit der…</p>
<h3 id="pipe">Pipe %&gt;%</h3>
<p>Mit der Hilfe von <code>%&gt;%</code> können alle diese Operationen auf einmal ausgeführt werden!</p>
<p>[Prozent größer Prozent] wird pipe operator genannt. Diese Pipe ermöglicht es Daten einfacher, verständlicher und lesbarer und ohne Verlust von Flexibilität zu transformieren.</p>
<p><strong>Wichtig ist:</strong> Den pipe operator kann man sich dabei als “danach” vorstellen.</p>
<p>So haben wir es bisher kennengelernt Funktionen zu benutzen:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">slice</span>(start_pirus, <span class="dv">1</span>)</code></pre></div>
<pre><code>## # A tibble: 1 x 20
##   subject_id date         age  male gender married student unemployed
##        &lt;dbl&gt; &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;
## 1       1000 2002-05-08    32     1      2       1       1          0
## # ... with 12 more variables: mental &lt;dbl&gt;, abuse_child &lt;dbl&gt;,
## #   crime_history &lt;chr&gt;, violent &lt;dbl&gt;, extent &lt;dbl&gt;, terror_group &lt;chr&gt;,
## #   radicalization &lt;dbl&gt;, clique &lt;dbl&gt;, terror_type &lt;fct&gt;, year &lt;dbl&gt;,
## #   birth &lt;dbl&gt;, male_label &lt;chr&gt;</code></pre>
<p>Wo das erste Argument immer <em>der Datensatz</em> ist.</p>
<p>Mit Hilfe der Pipe können wir das ganze so schreiben:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">slice</span>(<span class="dv">1</span>)</code></pre></div>
<pre><code>## # A tibble: 1 x 20
##   subject_id date         age  male gender married student unemployed
##        &lt;dbl&gt; &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;
## 1       1000 2002-05-08    32     1      2       1       1          0
## # ... with 12 more variables: mental &lt;dbl&gt;, abuse_child &lt;dbl&gt;,
## #   crime_history &lt;chr&gt;, violent &lt;dbl&gt;, extent &lt;dbl&gt;, terror_group &lt;chr&gt;,
## #   radicalization &lt;dbl&gt;, clique &lt;dbl&gt;, terror_type &lt;fct&gt;, year &lt;dbl&gt;,
## #   birth &lt;dbl&gt;, male_label &lt;chr&gt;</code></pre>
<p>Sequences of functions make you read inside out</p>
<p>So weit so gut. Aber die wahre Power entfaltet die Pipe erst bei der Anwendung von mehreren Funktionen. Hier ein Beispiel wie ein etwas verwirrender Code aussehen kann.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">slice</span>(<span class="kw">filter</span>(start_pirus, crime_history <span class="op">==</span><span class="st"> &quot;Violent&quot;</span>), <span class="dv">1</span>)</code></pre></div>
<pre><code>## # A tibble: 0 x 20
## # ... with 20 variables: subject_id &lt;dbl&gt;, date &lt;date&gt;, age &lt;dbl&gt;,
## #   male &lt;dbl&gt;, gender &lt;dbl&gt;, married &lt;dbl&gt;, student &lt;dbl&gt;,
## #   unemployed &lt;dbl&gt;, mental &lt;dbl&gt;, abuse_child &lt;dbl&gt;,
## #   crime_history &lt;chr&gt;, violent &lt;dbl&gt;, extent &lt;dbl&gt;, terror_group &lt;chr&gt;,
## #   radicalization &lt;dbl&gt;, clique &lt;dbl&gt;, terror_type &lt;fct&gt;, year &lt;dbl&gt;,
## #   birth &lt;dbl&gt;, male_label &lt;chr&gt;</code></pre>
<p>Diese Methode zwingt uns dazu von innen nach außen zu lesen! <em>Grausam!</em></p>
<blockquote>
<p>Wohingegen die Pipe es uns ermöglicht von links nach rechts und von oben nach unten zu lesen1</p>
</blockquote>
<p>Wie gewohnt!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(crime_history <span class="op">==</span><span class="st"> &quot;Violent&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span>)</code></pre></div>
<pre><code>## # A tibble: 0 x 20
## # ... with 20 variables: subject_id &lt;dbl&gt;, date &lt;date&gt;, age &lt;dbl&gt;,
## #   male &lt;dbl&gt;, gender &lt;dbl&gt;, married &lt;dbl&gt;, student &lt;dbl&gt;,
## #   unemployed &lt;dbl&gt;, mental &lt;dbl&gt;, abuse_child &lt;dbl&gt;,
## #   crime_history &lt;chr&gt;, violent &lt;dbl&gt;, extent &lt;dbl&gt;, terror_group &lt;chr&gt;,
## #   radicalization &lt;dbl&gt;, clique &lt;dbl&gt;, terror_type &lt;fct&gt;, year &lt;dbl&gt;,
## #   birth &lt;dbl&gt;, male_label &lt;chr&gt;</code></pre>
<p><strong>Ein weiterer Vorteil</strong></p>
<p>Wenn wir Funktionen einzelnen ausführen dann müssen wir uch jeden Schritt einzeln mit einem neuen Objekt festhalten:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pirus_violent &lt;-<span class="st"> </span><span class="kw">filter</span>(start_pirus, crime_history <span class="op">==</span><span class="st"> &quot;Violent&quot;</span>)

pirus_alter &lt;-<span class="st"> </span><span class="kw">arrange</span>(pirus_violent, age)

pirus_jung &lt;-<span class="st"> </span><span class="kw">slice</span>(pirus_alter, <span class="dv">1</span>) 

pirus_jung</code></pre></div>
<pre><code>## # A tibble: 0 x 20
## # ... with 20 variables: subject_id &lt;dbl&gt;, date &lt;date&gt;, age &lt;dbl&gt;,
## #   male &lt;dbl&gt;, gender &lt;dbl&gt;, married &lt;dbl&gt;, student &lt;dbl&gt;,
## #   unemployed &lt;dbl&gt;, mental &lt;dbl&gt;, abuse_child &lt;dbl&gt;,
## #   crime_history &lt;chr&gt;, violent &lt;dbl&gt;, extent &lt;dbl&gt;, terror_group &lt;chr&gt;,
## #   radicalization &lt;dbl&gt;, clique &lt;dbl&gt;, terror_type &lt;fct&gt;, year &lt;dbl&gt;,
## #   birth &lt;dbl&gt;, male_label &lt;chr&gt;</code></pre>
<blockquote>
<p>Wohingegen die Pipe es uns ermöglicht den Datensatz nur einmal zu spezifizieren</p>
</blockquote>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pirus_jung &lt;-<span class="st"> </span>start_pirus <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(crime_history <span class="op">==</span><span class="st"> &quot;Violent&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">arrange</span>(age) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span>) 

pirus_jung</code></pre></div>
<pre><code>## # A tibble: 0 x 20
## # ... with 20 variables: subject_id &lt;dbl&gt;, date &lt;date&gt;, age &lt;dbl&gt;,
## #   male &lt;dbl&gt;, gender &lt;dbl&gt;, married &lt;dbl&gt;, student &lt;dbl&gt;,
## #   unemployed &lt;dbl&gt;, mental &lt;dbl&gt;, abuse_child &lt;dbl&gt;,
## #   crime_history &lt;chr&gt;, violent &lt;dbl&gt;, extent &lt;dbl&gt;, terror_group &lt;chr&gt;,
## #   radicalization &lt;dbl&gt;, clique &lt;dbl&gt;, terror_type &lt;fct&gt;, year &lt;dbl&gt;,
## #   birth &lt;dbl&gt;, male_label &lt;chr&gt;</code></pre>
<p><strong>dataframe first, functions second</strong></p>
<p>Jetzt seid ihr dran!</p>
<p>Benutzt die pipe für folgende Aufgaben:</p>
<ol start="15" style="list-style-type: decimal">
<li>Selektiere die folgenden Variablen</li>
</ol>
<ul>
<li><code>male</code></li>
<li><code>age</code></li>
<li><code>radicalization</code></li>
<li><code>terror_type</code></li>
<li><code>terror_group</code></li>
</ul>
<ol start="16" style="list-style-type: decimal">
<li><p>Filtere die Variable nur nach Männern</p></li>
<li><p>Erstelle eine neue Variable namens <code>strong_believer</code> mit der Ausprägung <code>1</code> für den Wert 5 von <code>radicalization</code> und <code>0</code> für alle anderen.</p></li>
<li><p>Benenne die Variable <code>terror_type</code> in <code>ideology</code> um.</p></li>
<li><p>Selektiere die folgenden Variablen</p></li>
</ol>
<ul>
<li><code>strong_believer</code></li>
<li><code>ideology</code></li>
<li><code>age</code></li>
</ul>
<h3 id="variablen-auspragungen-zahlen-mit-count-tabyl-und-tally">Variablen(-ausprägungen) zählen mit <code>count</code>, <code>tabyl</code> und <code>tally</code></h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">count</span>(terror_group, <span class="dt">sort =</span> T)</code></pre></div>
<pre><code>## # A tibble: 80 x 2
##    terror_group                                    n
##    &lt;chr&gt;                                       &lt;int&gt;
##  1 &lt;NA&gt;                                          730
##  2 Ku Klux Klan                                  148
##  3 Islamic State of Iraq and the Levant (ISIL)   146
##  4 Jewish Defense League (JDL)                    60
##  5 al-Shabaab                                     57
##  6 Weather Underground                            54
##  7 al-Qaeda core                                  51
##  8 Earth Liberation Front (ELF)                   44
##  9 Animal Liberation Front (ALF)                  36
## 10 Aryan Nations                                  36
## # ... with 70 more rows</code></pre>
<p><strong>ist das gleiche wie:</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span>janitor<span class="op">::</span><span class="kw">tabyl</span>(terror_type)</code></pre></div>
<pre><code>##   terror_type   n   percent
##  Single Issue 340 0.1823056
##      Far Left 324 0.1737265
##     Far Right 746 0.4000000
##      Islamism 455 0.2439678</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">count</span>(terror_type, gender, <span class="dt">sort =</span> T)</code></pre></div>
<pre><code>## # A tibble: 8 x 3
##   terror_type  gender     n
##   &lt;fct&gt;         &lt;dbl&gt; &lt;int&gt;
## 1 Far Right         2   706
## 2 Islamism          2   427
## 3 Single Issue      2   305
## 4 Far Left          2   245
## 5 Far Left          1    79
## 6 Far Right         1    40
## 7 Single Issue      1    35
## 8 Islamism          1    28</code></pre>
<h3 id="group_by-summary">group_by + summary</h3>
<p><strong>Gruppieren und Summaries</strong></p>
<p>Mit <code>group_by()</code> werden die nachfolgden Operationen gruppenweise ausgeführt. Mit <code>summarise()</code> werden die gruppierten Variablen aggregiert</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(terror_type) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Gruppenvariable</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">mean_age =</span> <span class="kw">mean</span>(age, <span class="dt">na.rm =</span> T))</code></pre></div>
<p>Können wir noch mit der Standardabweichung erweitern:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(terror_type) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Gruppenvariable</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">mean_extent =</span> <span class="kw">mean</span>(extent, <span class="dt">na.rm =</span> T), 
            <span class="dt">sd_extent =</span> <span class="kw">sd</span>(extent, <span class="dt">na.rm =</span> T)) </code></pre></div>
<pre><code>## # A tibble: 4 x 3
##   terror_type  mean_extent sd_extent
##   &lt;fct&gt;              &lt;dbl&gt;     &lt;dbl&gt;
## 1 Single Issue        2.38      2.26
## 2 Far Left            2.59      2.33
## 3 Far Right           2.27      2.21
## 4 Islamism            1.16      1.72</code></pre>
<p>Und noch ordnen:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(terror_type) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Gruppenvariable</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">mean_extent =</span> <span class="kw">mean</span>(extent, <span class="dt">na.rm =</span> T), 
            <span class="dt">sd_extent =</span> <span class="kw">sd</span>(extent, <span class="dt">na.rm =</span> T)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(mean_extent))</code></pre></div>
<pre><code>## # A tibble: 4 x 3
##   terror_type  mean_extent sd_extent
##   &lt;fct&gt;              &lt;dbl&gt;     &lt;dbl&gt;
## 1 Far Left            2.59      2.33
## 2 Single Issue        2.38      2.26
## 3 Far Right           2.27      2.21
## 4 Islamism            1.16      1.72</code></pre>
<p><strong>Mit tally Ausprägungen zählen</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(terror_type, gender) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">tally</span>()</code></pre></div>
<pre><code>## # A tibble: 8 x 3
## # Groups:   terror_type [?]
##   terror_type  gender     n
##   &lt;fct&gt;         &lt;dbl&gt; &lt;int&gt;
## 1 Single Issue      1    35
## 2 Single Issue      2   305
## 3 Far Left          1    79
## 4 Far Left          2   245
## 5 Far Right         1    40
## 6 Far Right         2   706
## 7 Islamism          1    28
## 8 Islamism          2   427</code></pre>
<p><strong>Aufgabe</strong></p>
<ol start="20" style="list-style-type: decimal">
<li>Gruppiere <code>start_pirus</code> nach <code>gender</code> und rechne den Mittelwerte des Alters (<code>age</code>) per Geschlecht aus. Vergiss nicht <code>na.rm = T</code> zu spezifizieren!
</div>
</div></li>
</ol>
</div>
<div id="#03_ggplot2" class="ui tab tab-pane container" role="tabpanel" style="height: 100%;" data-tab="03_ggplot2">
<div class="ui padded grid">
<div class="sixteen wide column">
<p><br> <br></p>
<h1 id="hello-ggplot2">Hello <code>ggplot2</code>!</h1>
<div class="ui tiny images">
<p><img src="images/tidyverse.png"> <img src="images/ggplot2.png"></p>
</div>
<h2 id="zwei-funktionen-von-datenvisualisierungen">Zwei Funktionen von Datenvisualisierungen</h2>
<blockquote>
<p>“The simple graph has brought more information to the data analyst’s mind than any other device.” — John Tukey</p>
</blockquote>
<ul>
<li>unterschied Exploratory Data Viz vs. Publication Ready Data Viz</li>
</ul>
<p><strong>Additional Sources</strong></p>
<ul>
<li><a href="https://uc-r.github.io/ggplot_intro">An Introduction to ggplot2 (UC)</a></li>
</ul>
<h2 id="grammar-of-graphics">Grammar of Graphics</h2>
<ul>
<li>A grammar of a language defines the rules of structuring words and phrases into meaningful expressions.</li>
<li>A grammar of graphics defines the rules of structuring mathematic and aesthetic elements into a meaningful graph.</li>
<li>allows the user to build a graph from concepts rather than recall of commands and options.</li>
</ul>
<p>Leland Wilkinson (2005) designed the grammar upon which ggplot2 is based.</p>
<p><br></p>
<div class="ui large centered images">
<p><img src="images/ggplot2_internals.png"> <img src="images/grammer_of_graphics.png"></p>
</div>
<ul>
<li><a href="https://gallery.shinyapps.io/ggtree/" class="uri">https://gallery.shinyapps.io/ggtree/</a></li>
</ul>
<p><br></p>
<h2 id="die-evolution-einer-grafik">Die Evolution einer Grafik</h2>
<p>Klicke schrittweise auf die Tabs um den Aufbau einer Grafik angefangen bei den Daten zu verdeutlichen.</p>
<div class="tab demo">
<div class="ui secondary menu">
<div class="active item" data-tab="gg_data">
Data
</div>
<div class="item" data-tab="gg_body">
Body
</div>
<div class="item" data-tab="gg_aes">
Aesthetic
</div>
<div class="item" data-tab="gg_geom">
Geom
</div>
<div class="item" data-tab="gg_fill">
Fill
</div>
<div class="item" data-tab="gg_alpha">
Alpha
</div>
<div class="item" data-tab="gg_labs">
Labs
</div>
<div class="item" data-tab="gg_facet">
Facets
</div>
<div class="item" data-tab="gg_theme">
Facets
</div>
</div>
<br>
<div class="ui active tab" data-tab="gg_data">
<div class="ui stackable grid">
<div class="seven wide column">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus</code></pre></div>
<p>Am Anfang steht bei ggplot immer ein Dataframe. Idealerweise wurden alle Datentransformationen bereits vor der Erstellung des Plots durchgeführt. Wenn ein Plot mal nicht funktioniert wird in 95% der Fälle etwas mit den Daten oder deren Format nicht stimmen. Deshalb ist es wichtig die Daten und deren Struktur zu verstehen.</p>
</div>
<div class="eight wide column">
<pre><code>## Observations: 5
## Variables: 18
## $ subject_id     &lt;dbl&gt; 1000, 1001, 1002, 1005, 1006
## $ date           &lt;date&gt; 2002-05-08, 2001-11-25, 1997-05-01, 1993-04-10...
## $ age            &lt;dbl&gt; 32, 20, 28, 25, 25
## $ male           &lt;dbl&gt; 1, 1, 1, 1, 1
## $ gender         &lt;dbl&gt; 2, 2, 2, 2, 2
## $ married        &lt;dbl&gt; 1, 0, 1, 1, 0
## $ student        &lt;dbl&gt; 1, 1, 0, 0, 0
## $ unemployed     &lt;dbl&gt; 0, 0, 0, 0, 0
## $ mental         &lt;dbl&gt; 0, 0, 0, 0, 0
## $ abuse_child    &lt;dbl&gt; 0, 0, 0, 0, 0
## $ crime_history  &lt;fct&gt; Violent, None, Violent, None, NA
## $ violent        &lt;chr&gt; &quot;Violent&quot;, &quot;None-Violent&quot;, &quot;None-Violent&quot;, &quot;Vio...
## $ extent         &lt;dbl&gt; 2, 0, NA, 5, 5
## $ terror_group   &lt;chr&gt; &quot;al-Qaeda core&quot;, &quot;Taliban&quot;, &quot;al-Qaeda core&quot;, NA...
## $ radicalization &lt;dbl&gt; 4, 5, 5, 5, 5
## $ clique         &lt;dbl&gt; 1, 1, 1, 1, 1
## $ terror_type    &lt;fct&gt; Islamism, Islamism, Islamism, Islamism, Islamism
## $ year           &lt;dbl&gt; 2002, 2001, 1997, 1993, 1993</code></pre>
</div>
</div>
</div>
<!-- new tab -->
<div class="ui tab" data-tab="gg_body">
<div class="ui stackable grid">
<div class="seven wide column">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>()</code></pre></div>
Durch die Funktion <code>ggplot()</code> wird das Layout der Grafik initialisiert. Noch sind keine weiteren Informationen spezifiziert (Note: nicht ggplot2, der Name des packages).
</div>
<div class="seven wide column">
<p><img src="index_files/figure-html/ggbody2-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
<!-- AES -->
<div class="ui tab" data-tab="gg_aes">
<div class="ui stackable grid">
<div class="seven wide column">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">aes</span>(<span class="dt">x =</span> terror_type)</code></pre></div>
<p>Die Funktion <code>aes()</code> definiert welche Variablen für welche Achsen spezifiziert werden. <code>aes()</code> hat viele weitere Parameter (Optionen):</p>
<ul>
<li>x: positioning along x-axis</li>
<li>y: positioning along y-axis</li>
<li>color: color of objects; for 2-d objects, the color of the object’s outline (compare to fill below)</li>
<li>fill: fill color of objects</li>
<li>alpha: transparency of objects</li>
<li>lineterror_type: how lines should be drawn (solid, dashed, dotted, etc.)</li>
<li>shape: shape of markers in scatter plots</li>
<li>size: how large objects appear
</div>
<div class = "seven wide column">
</li>
</ul>
<p><img src="index_files/figure-html/aes2-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
<!-- Geom -->
<div class="ui tab" data-tab="gg_geom">
<div class="ui stackable grid">
<div class="seven wide column">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">aes</span>(<span class="dt">x =</span> terror_type) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_bar</span>()</code></pre></div>
<p>Es gibt unzählige <code>geom_</code> Funktionen welche für die Datendarstellung verantwortlich sind und ein eine bestimmtes Datenformat erwarten.</p>
</div>
<div class="seven wide column">
<p><img src="index_files/figure-html/geom2-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
<!-- Colour -->
<div class="ui tab" data-tab="gg_fill">
<div class="ui stackable grid">
<div class="seven wide column">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">aes</span>(<span class="dt">x =</span> terror_type, <span class="dt">fill =</span> terror_type) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_bar</span>()</code></pre></div>
<p>Es gibt zwei Farb-parameter <code>fill</code> und <code>colour</code>. <code>fill</code> wird verwendet um Flächen zu kolorieren und <code>colour</code> um Lines (Outlines) und Points einzufärben.</p>
</div>
<div class="seven wide column">
<p><img src="index_files/figure-html/fill2-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
<!-- Alpha -->
<div class="ui tab" data-tab="gg_alpha">
<div class="ui stackable grid">
<div class="seven wide column">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">aes</span>(<span class="dt">x =</span> terror_type, <span class="dt">fill =</span> terror_type) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">alpha =</span> .<span class="dv">7</span>)</code></pre></div>
Mit <code>alpha</code> wird die Intensität der Farbe eingestellt. 0 bedeutet komplett durchsichtig; 1 volle Sättigung.
</div>
<div class="seven wide column">
<p><img src="index_files/figure-html/alpha2-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
<!-- Labels -->
<div class="ui tab" data-tab="gg_labs">
<div class="ui stackable grid">
<div class="seven wide column">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">aes</span>(<span class="dt">x =</span> terror_type, <span class="dt">fill =</span> terror_type) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">alpha =</span> .<span class="dv">7</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Terror Types&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Frequency&quot;</span>, <span class="dt">title =</span> <span class="st">&quot;Frequency by Terror Type&quot;</span>) </code></pre></div>
<p>Die Lables an einem Plot dürfen natürlich nicht fehlen.</p>
</div>
<div class="seven wide column">
<p><img src="index_files/figure-html/labs2-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
<!-- Facets -->
<div class="ui tab" data-tab="gg_facet">
<div class="ui stackable grid">
<div class="seven wide column">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">aes</span>(<span class="dt">x =</span> terror_type, <span class="dt">fill =</span> terror_type) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">alpha =</span> .<span class="dv">7</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Terror Types&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Frequency&quot;</span>, <span class="dt">title =</span> <span class="st">&quot;Frequency by Terror Type&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>violent)</code></pre></div>
<p>Mit <code>facet_wrap</code> kann ein Plot über mehrere Dimensionen aufgefächert werden.</p>
</div>
<div class="seven wide column">
<p><img src="index_files/figure-html/facet2-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
<!-- theme -->
<div class="ui tab" data-tab="gg_theme">
<div class="ui stackable grid">
<div class="seven wide column">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">aes</span>(<span class="dt">x =</span> terror_type, <span class="dt">fill =</span> terror_type) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">alpha =</span> .<span class="dv">7</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Frequency&quot;</span>, <span class="dt">title =</span> <span class="st">&quot;Frequency by Terror Type&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>violent) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_classic</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</code></pre></div>
<p>Mit <code>facet_wrap</code> kann ein Plot über mehrere Dimensionen aufgefächert werden.</p>
</div>
<div class="seven wide column">
<p><img src="index_files/figure-html/theme-65-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
<!-- class: .tab.demo -->
</div>
<script type="text/javascript">
$(document)
  .ready(function(){
    $('.tab.demo .menu .item')
      .tab({
        context: $('.tab.demo')
      })
    ;
  })
;
</script>
<h2 id="welche-geoms-gibts-es">Welche Geoms gibts es?</h2>
<p><code>geom_&lt;type&gt;</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">geoms_list &lt;-<span class="st"> </span><span class="kw">help.search</span>(<span class="st">&quot;geom_&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;ggplot2&quot;</span>)
geoms_list<span class="op">$</span>matches <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(Topic, Title) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</code></pre></div>
<h2 id="farben">Farben</h2>
<ul>
<li>colourpicker -&gt; Addin</li>
</ul>
<h2 id="plot-theming">Plot Theming</h2>
<div id="themes">
<div class="ui secondary menu">
<div class="active item" data-tab="gg_default">
Deafult
</div>
<div class="item" data-tab="gg_bw">
BW
</div>
<div class="item" data-tab="gg_hc">
HC
</div>
<div class="item" data-tab="gg_gdocs">
Gdocs
</div>
</div>
</div>
<div class="ui active tab" data-tab="gg_default">
<div class="ui stackable grid">
<div class="seven wide column">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">aes</span>(<span class="dt">x =</span> terror_type, <span class="dt">fill =</span> terror_type) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">alpha =</span> .<span class="dv">7</span>) </code></pre></div>
<p><img src="index_files/figure-html/default1-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
<div class="seven wide column">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">count</span>(year, terror_type) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(year, n, <span class="dt">colour =</span> terror_type)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>()</code></pre></div>
<p><img src="index_files/figure-html/default2-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
<div class="ui tab" data-tab="gg_bw">
<div class="ui stackable grid">
<div class="seven wide column">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">aes</span>(<span class="dt">x =</span> terror_type, <span class="dt">fill =</span> terror_type) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">alpha =</span> .<span class="dv">7</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_fill_grey</span>(<span class="st">&quot;TITLE&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_bw</span>()</code></pre></div>
<p><img src="index_files/figure-html/bw1-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
<div class="seven wide column">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>(year, terror_type) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(year, n, <span class="dt">colour =</span> terror_type)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_colour_grey</span>(<span class="st">&quot;TITLE&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_bw</span>()</code></pre></div>
<p><img src="index_files/figure-html/bw2-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
<div class="ui tab" data-tab="gg_hc">
<div class="ui stackable grid">
<div class="seven wide column">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggthemes)
start_pirus <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">aes</span>(<span class="dt">x =</span> terror_type, <span class="dt">fill =</span> terror_type) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">alpha =</span> .<span class="dv">7</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_fill_hc</span>(<span class="dt">name =</span> <span class="st">&quot;TITLE&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_hc</span>()</code></pre></div>
<p><img src="index_files/figure-html/hc1-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
<div class="seven wide column">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggthemes)
start_pirus <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>(year, terror_type) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(year, n, <span class="dt">colour =</span> terror_type)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_colour_hc</span>(<span class="dt">name =</span> <span class="st">&quot;TITLE&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_hc</span>()</code></pre></div>
<p><img src="index_files/figure-html/hc2-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
<div class="ui tab" data-tab="gg_gdocs">
<div class="ui stackable grid">
<div class="seven wide column">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggthemes)
start_pirus <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">aes</span>(<span class="dt">x =</span> terror_type, <span class="dt">fill =</span> terror_type) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">alpha =</span> .<span class="dv">7</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_fill_gdocs</span>(<span class="dt">name =</span> <span class="st">&quot;TITLE&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_gdocs</span>()</code></pre></div>
<p><img src="index_files/figure-html/gdocs1-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
<div class="seven wide column">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggthemes)
start_pirus <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>(year, terror_type) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(year, n, <span class="dt">colour =</span> terror_type)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_colour_gdocs</span>(<span class="dt">name =</span> <span class="st">&quot;TITLE&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_gdocs</span>()</code></pre></div>
<p><img src="index_files/figure-html/gdocs2-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
<script>
$('#themes .menu .item')
  .tab({
    context: $('#themes')
  })
;
</script>
<p><br> <br></p>
<h2 id="some-informative-plots">Some Informative Plots</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(date, terror_type, <span class="dt">colour =</span> terror_type)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">alpha =</span> .<span class="dv">5</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;none&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;&quot;</span>)</code></pre></div>
<p><img src="index_files/figure-html/unnamed-chunk-67-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(date, terror_type, <span class="dt">colour =</span> terror_type)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">alpha =</span> .<span class="dv">5</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;none&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>violent)</code></pre></div>
<p><img src="index_files/figure-html/unnamed-chunk-68-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">year =</span> lubridate<span class="op">::</span><span class="kw">year</span>(date)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">count</span>(year, violent) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(year, n, <span class="dt">colour =</span> violent)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>()</code></pre></div>
<p><img src="index_files/figure-html/unnamed-chunk-69-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">count</span>(year, terror_type) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(year, n, <span class="dt">colour =</span> terror_type)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>()</code></pre></div>
<p><img src="index_files/figure-html/unnamed-chunk-70-1.png" width="672" style="display: block; margin: auto;" /></p>
<!-- <div class="ui shape"> -->
<!--   <div class="sides"> -->
<!--   <div class="active side">This side starts visible.</div> -->
<!--   <div class="side">This is yet another side</div> -->
<!--   <div class="side">This is the last side</div> -->
<!--   </div> -->
<!-- </div> -->
<!-- <div class = "ui teal button" id = "flip">Flip</div> -->
<!-- <script> -->
<!-- $(document).ready(function() { -->
<!--   $('.shape').shape(); -->
<!--   $('#flip').click(function({ -->
<!--     $('.ui.shape').shape('flip up') -->
<!--   })); -->
<!-- }); -->
<!-- </script> -->
</div>
</div>
</div>
<div id="#04_analysis" class="ui tab tab-pane container" role="tabpanel" style="height: 100%;" data-tab="04_analysis">
<div class="ui padded grid">
<div class="sixteen wide column">
<p><br> <br></p>
<h1 id="analysis">Analysis</h1>
<div class="ui raised segment">
<p>
Dieser Notebook repliziert einen Research Report vom Januar 2018 zu Gewalt von extremistischen Straftätern. Die Daten sind frei zugänglich <a href="https://start.umd.edu/data-and-tools/start-datasets">hier</a>. Der Report welchen wir replizieren ist <a href="https://www.start.umd.edu/pubs/START_PIRUS_PreRadCriminalActivityofUSExtremists_Jan2018.pdf">hier</a> hinterlegt und trägt den Titel: <em>Pre-Radicalization Criminal Activity of United States Extremists</em>
</p>
</div>
<h2 id="packages">Packages</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pacman<span class="op">::</span><span class="kw">p_load</span>(tidyverse, janitor, ggthemes, texreg, sjPlot)</code></pre></div>
<h2 id="load-data">Load Data</h2>
<div class="row">
<div class="ui secondary menu">
<div class="active item" data-tab="glimpse">
Glimpse
</div>
<div class="item" data-tab="code">
Code
</div>
</div>
</div>
<div class="row">
<div class="ui tab" data-tab="code">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">recode_missings &lt;-<span class="st"> </span><span class="cf">function</span>(x) {
  <span class="kw">ifelse</span>(x <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="op">-</span><span class="dv">88</span>, <span class="op">-</span><span class="dv">99</span>), <span class="ot">NA</span>, x)
}

start_pirus &lt;-<span class="st"> </span>openxlsx<span class="op">::</span><span class="kw">read.xlsx</span>(<span class="st">&quot;start_pirus_2018.xlsx&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span>janitor<span class="op">::</span><span class="kw">clean_names</span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate_all</span>(recode_missings)  <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(
    <span class="dt">terror_type =</span> <span class="kw">case_when</span>(
      radicalization_islamist <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">~</span><span class="st"> &quot;Islamism&quot;</span>,
      radicalization_far_right <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">~</span><span class="st"> &quot;Far Right&quot;</span>,
      radicalization_far_left <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">~</span><span class="st"> &quot;Far Left&quot;</span>,
      radicalization_single_issue <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">~</span><span class="st"> &quot;Single Issue&quot;</span>
    ) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span>forcats<span class="op">::</span><span class="kw">fct_relevel</span>(<span class="st">&quot;Single Issue&quot;</span>)
  ) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">unemployed =</span> <span class="kw">ifelse</span>(employment_status <span class="op">%in%</span><span class="st"> </span><span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">0</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">married =</span> <span class="kw">ifelse</span>(marital_status <span class="op">==</span><span class="st"> </span><span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">0</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">male =</span> <span class="kw">ifelse</span>(gender <span class="op">==</span><span class="st"> </span><span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">0</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">mental =</span> <span class="kw">ifelse</span>(psychological <span class="op">%in%</span><span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">0</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(
    <span class="dt">crime_history =</span> <span class="kw">case_when</span>(
      previous_criminal_activity <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">~</span><span class="st"> &quot;None&quot;</span>,
      previous_criminal_activity <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">~</span><span class="st"> &quot;Non-Violent&quot;</span>,
      previous_criminal_activity <span class="op">==</span><span class="st"> </span><span class="dv">2</span> <span class="op">~</span><span class="st"> &quot;Non-Violent&quot;</span>,
      previous_criminal_activity <span class="op">==</span><span class="st"> </span><span class="dv">3</span> <span class="op">~</span><span class="st"> &quot;Violent&quot;</span>
    ) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span>forcats<span class="op">::</span><span class="kw">fct_relevel</span>(<span class="st">&quot;None&quot;</span>)
  ) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">date =</span> <span class="kw">as.Date</span>(date_exposure, <span class="dt">origin =</span> <span class="st">&quot;1899-12-30&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(
    subject_id, 
    date,
    age, 
    male, 
    gender,
    married,
    student, 
    unemployed,
    mental,
    abuse_child, 
    crime_history, 
    violent,
    <span class="dt">extent =</span> extent_plot, 
    <span class="dt">terror_group =</span> terrorist_group_name1,
    <span class="dt">radicalization =</span> radical_beliefs,
    clique,
    terror_type
  ) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">as_tibble</span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">date =</span> <span class="kw">as.Date</span>(date, <span class="dt">origin =</span> <span class="st">&quot;1899-12-30&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#origin=&quot;1970-01-01&quot;)) %&gt;%   </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">year =</span> lubridate<span class="op">::</span><span class="kw">year</span>(date))

<span class="co">#save(start_pirus, file = &quot;start_pirus.Rdata&quot;)</span></code></pre></div>
</div>
<div class="ui active tab" data-tab="glimpse">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">load</span>(<span class="st">&quot;start_pirus.Rdata&quot;</span>)
start_pirus <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span>glimpse</code></pre></div>
<pre><code>## Observations: 1,865
## Variables: 18
## $ subject_id     &lt;dbl&gt; 1000, 1001, 1002, 1005, 1006, 1010, 1013, 1014,...
## $ date           &lt;date&gt; 2002-05-08, 2001-11-25, 1997-05-01, 1993-04-10...
## $ age            &lt;dbl&gt; 32, 20, 28, 25, 25, 27, 23, 28, 26, 25, 25, 24,...
## $ male           &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,...
## $ gender         &lt;dbl&gt; 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,...
## $ married        &lt;dbl&gt; 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 1, 0, 0,...
## $ student        &lt;dbl&gt; 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, NA, 1, 0, 0...
## $ unemployed     &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0,...
## $ mental         &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0,...
## $ abuse_child    &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ crime_history  &lt;fct&gt; Violent, None, Violent, None, NA, NA, Non-Viole...
## $ violent        &lt;dbl&gt; 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,...
## $ extent         &lt;dbl&gt; 2, 0, NA, 5, 5, 2, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0...
## $ terror_group   &lt;chr&gt; &quot;al-Qaeda core&quot;, &quot;Taliban&quot;, &quot;al-Qaeda core&quot;, NA...
## $ radicalization &lt;dbl&gt; 4, 5, 5, 5, 5, 5, 2, 2, NA, 2, 5, 3, 2, 5, 5, 5...
## $ clique         &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, NA, 1, 1, 1...
## $ terror_type    &lt;fct&gt; Islamism, Islamism, Islamism, Islamism, Islamis...
## $ year           &lt;dbl&gt; 2002, 2001, 1997, 1993, 1993, 2003, 2002, 2002,...</code></pre>
</div>
</div>
<!-- JAVASCRIPT TRIGGER -->
<script>
$('.secondary.menu .item').tab();
</script>
<h2 id="lineare-regression">Lineare Regression</h2>
<p>Eine lineare Regression wird auf folgende Weise durchgeführt:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lm</span>(extent <span class="op">~</span><span class="st"> </span>radicalization, <span class="dt">data =</span> start_pirus) </code></pre></div>
<pre><code>## 
## Call:
## lm(formula = extent ~ radicalization, data = start_pirus)
## 
## Coefficients:
##    (Intercept)  radicalization  
##         1.6413          0.1233</code></pre>
<p>Genauso wie alles andere in R können wir auch eine lineare Regression in ein Objekt packen:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">model1 &lt;-<span class="st"> </span><span class="kw">lm</span>(extent <span class="op">~</span><span class="st"> </span>radicalization, <span class="dt">data =</span> start_pirus) 

model1</code></pre></div>
<pre><code>## 
## Call:
## lm(formula = extent ~ radicalization, data = start_pirus)
## 
## Coefficients:
##    (Intercept)  radicalization  
##         1.6413          0.1233</code></pre>
<p>Die lineare Regression in ein Objekt zu packen hilft uns dabei die Resultate der Regression näher unter die Lupe zu nehmen.</p>
<p><code>screenreg</code> aus dem <code>texreg</code> package gibt uns eine schöne Regressiontabelle aus:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">htmlreg</span>(model1) <span class="op">%&gt;%</span><span class="st"> </span>shiny<span class="op">::</span><span class="kw">HTML</span>(.)</code></pre></div>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<table cellspacing="0" align="center" style="border: none;">
<caption align="bottom" style="margin-top:0.3em;">Statistical models</caption>
<tr>
<th style="text-align: left; border-top: 2px solid black; border-bottom: 1px solid black; padding-right: 12px;"><b></b></th>
<th style="text-align: left; border-top: 2px solid black; border-bottom: 1px solid black; padding-right: 12px;"><b>Model 1</b></th>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">(Intercept)</td>
<td style="padding-right: 12px; border: none;">1.64<sup style="vertical-align: 0px;">***</sup></td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;"></td>
<td style="padding-right: 12px; border: none;">(0.15)</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">radicalization</td>
<td style="padding-right: 12px; border: none;">0.12<sup style="vertical-align: 0px;">***</sup></td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;"></td>
<td style="padding-right: 12px; border: none;">(0.04)</td>
</tr>
<tr>
<td style="border-top: 1px solid black;">R<sup style="vertical-align: 0px;">2</sup></td>
<td style="border-top: 1px solid black;">0.01</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">Adj. R<sup style="vertical-align: 0px;">2</sup></td>
<td style="padding-right: 12px; border: none;">0.01</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">Num. obs.</td>
<td style="padding-right: 12px; border: none;">1651</td>
</tr>
<tr>
<td style="border-bottom: 2px solid black;">RMSE</td>
<td style="border-bottom: 2px solid black;">2.19</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;" colspan="3"><span style="font-size:0.8em"><sup style="vertical-align: 0px;">***</sup>p &lt; 0.001, <sup style="vertical-align: 0px;">**</sup>p &lt; 0.01, <sup style="vertical-align: 0px;">*</sup>p &lt; 0.05</span></td>
</tr>
</table>

<p><strong>Aufgabe</strong></p>
<p>Versucht einmal eine Regresion durchzuführen in der ihr <code>extent</code> (AV) mit <code>crime_history</code> (UV) versucht zu erklären.</p>
<p>Als nächstes wollen wir eine kleine Analyse gemeinsam ausführen. Ziel ist es zu erklären wie sich der Radikalisierungsgrad (<em>radicalization</em>) einer Person auf die Fortgeschrittenheit der Planung einer extremistischen Tat (<em>extent</em>) auswirkt. Dazu nehmen wir auch einig Kontrolle heran:</p>
<ul>
<li><code>abuse_child</code></li>
<li><code>crime_history</code></li>
<li><code>age</code></li>
<li><code>male</code></li>
</ul>
<p><em>1. Schritt: eigenen Datensatz für die Analyse erstellen und alle NAs (missing values) rauswerfen (<code>drop_na</code>)</em></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_lm &lt;-<span class="st"> </span>start_pirus <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">drop_na</span>(radicalization, age, male, abuse_child, crime_history)</code></pre></div>
<p><code>drop_na</code> entfernt alle Fälle welche in den obigen Variablen ein NA haben</p>
<p><em>2. Schritt: Bauen wir ein sequentielles Modell</em></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">model1 &lt;-<span class="st">  </span><span class="kw">lm</span>(extent <span class="op">~</span><span class="st"> </span>radicalization, <span class="dt">data =</span> start_lm) 

model2 &lt;-<span class="st"> </span><span class="kw">lm</span>(extent <span class="op">~</span><span class="st">  </span>radicalization <span class="op">+</span><span class="st"> </span>abuse_child <span class="op">+</span><span class="st"> </span>crime_history, <span class="dt">data =</span> start_lm) 

model3 &lt;-<span class="st"> </span><span class="kw">lm</span>(extent <span class="op">~</span><span class="st">  </span>radicalization <span class="op">+</span><span class="st"> </span>abuse_child <span class="op">+</span><span class="st"> </span>crime_history <span class="op">+</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>male, <span class="dt">data =</span> start_lm) </code></pre></div>
<p><em>3. Schritt: Resultate darstellen</em></p>
<p><code>screenreg</code> erlaubt es uns auch mit <code>list</code> mehrere Modelle zu übergeben:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">htmlreg</span>(<span class="kw">list</span>(model1, model2, model3)) <span class="op">%&gt;%</span><span class="st"> </span>shiny<span class="op">::</span><span class="kw">HTML</span>(.)</code></pre></div>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<table cellspacing="0" align="center" style="border: none;">
<caption align="bottom" style="margin-top:0.3em;">Statistical models</caption>
<tr>
<th style="text-align: left; border-top: 2px solid black; border-bottom: 1px solid black; padding-right: 12px;"><b></b></th>
<th style="text-align: left; border-top: 2px solid black; border-bottom: 1px solid black; padding-right: 12px;"><b>Model 1</b></th>
<th style="text-align: left; border-top: 2px solid black; border-bottom: 1px solid black; padding-right: 12px;"><b>Model 2</b></th>
<th style="text-align: left; border-top: 2px solid black; border-bottom: 1px solid black; padding-right: 12px;"><b>Model 3</b></th>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">(Intercept)</td>
<td style="padding-right: 12px; border: none;">1.76<sup style="vertical-align: 0px;">***</sup></td>
<td style="padding-right: 12px; border: none;">1.59<sup style="vertical-align: 0px;">***</sup></td>
<td style="padding-right: 12px; border: none;">2.27<sup style="vertical-align: 0px;">***</sup></td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;"></td>
<td style="padding-right: 12px; border: none;">(0.20)</td>
<td style="padding-right: 12px; border: none;">(0.21)</td>
<td style="padding-right: 12px; border: none;">(0.33)</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">radicalization</td>
<td style="padding-right: 12px; border: none;">0.10<sup style="vertical-align: 0px;">*</sup></td>
<td style="padding-right: 12px; border: none;">0.09</td>
<td style="padding-right: 12px; border: none;">0.11<sup style="vertical-align: 0px;">*</sup></td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;"></td>
<td style="padding-right: 12px; border: none;">(0.05)</td>
<td style="padding-right: 12px; border: none;">(0.05)</td>
<td style="padding-right: 12px; border: none;">(0.05)</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">abuse_child</td>
<td style="padding-right: 12px; border: none;"></td>
<td style="padding-right: 12px; border: none;">0.41<sup style="vertical-align: 0px;">*</sup></td>
<td style="padding-right: 12px; border: none;">0.36<sup style="vertical-align: 0px;">*</sup></td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;"></td>
<td style="padding-right: 12px; border: none;"></td>
<td style="padding-right: 12px; border: none;">(0.17)</td>
<td style="padding-right: 12px; border: none;">(0.17)</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">crime_historyNon-Violent</td>
<td style="padding-right: 12px; border: none;"></td>
<td style="padding-right: 12px; border: none;">0.02</td>
<td style="padding-right: 12px; border: none;">0.13</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;"></td>
<td style="padding-right: 12px; border: none;"></td>
<td style="padding-right: 12px; border: none;">(0.18)</td>
<td style="padding-right: 12px; border: none;">(0.19)</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">crime_historyViolent</td>
<td style="padding-right: 12px; border: none;"></td>
<td style="padding-right: 12px; border: none;">0.84<sup style="vertical-align: 0px;">***</sup></td>
<td style="padding-right: 12px; border: none;">0.91<sup style="vertical-align: 0px;">***</sup></td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;"></td>
<td style="padding-right: 12px; border: none;"></td>
<td style="padding-right: 12px; border: none;">(0.19)</td>
<td style="padding-right: 12px; border: none;">(0.19)</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">age</td>
<td style="padding-right: 12px; border: none;"></td>
<td style="padding-right: 12px; border: none;"></td>
<td style="padding-right: 12px; border: none;">-0.02<sup style="vertical-align: 0px;">***</sup></td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;"></td>
<td style="padding-right: 12px; border: none;"></td>
<td style="padding-right: 12px; border: none;"></td>
<td style="padding-right: 12px; border: none;">(0.01)</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">male</td>
<td style="padding-right: 12px; border: none;"></td>
<td style="padding-right: 12px; border: none;"></td>
<td style="padding-right: 12px; border: none;">-0.09</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;"></td>
<td style="padding-right: 12px; border: none;"></td>
<td style="padding-right: 12px; border: none;"></td>
<td style="padding-right: 12px; border: none;">(0.24)</td>
</tr>
<tr>
<td style="border-top: 1px solid black;">R<sup style="vertical-align: 0px;">2</sup></td>
<td style="border-top: 1px solid black;">0.00</td>
<td style="border-top: 1px solid black;">0.03</td>
<td style="border-top: 1px solid black;">0.05</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">Adj. R<sup style="vertical-align: 0px;">2</sup></td>
<td style="padding-right: 12px; border: none;">0.00</td>
<td style="padding-right: 12px; border: none;">0.03</td>
<td style="padding-right: 12px; border: none;">0.04</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;">Num. obs.</td>
<td style="padding-right: 12px; border: none;">913</td>
<td style="padding-right: 12px; border: none;">913</td>
<td style="padding-right: 12px; border: none;">913</td>
</tr>
<tr>
<td style="border-bottom: 2px solid black;">RMSE</td>
<td style="border-bottom: 2px solid black;">2.18</td>
<td style="border-bottom: 2px solid black;">2.15</td>
<td style="border-bottom: 2px solid black;">2.14</td>
</tr>
<tr>
<td style="padding-right: 12px; border: none;" colspan="5"><span style="font-size:0.8em"><sup style="vertical-align: 0px;">***</sup>p &lt; 0.001, <sup style="vertical-align: 0px;">**</sup>p &lt; 0.01, <sup style="vertical-align: 0px;">*</sup>p &lt; 0.05</span></td>
</tr>
</table>

<p><em>4. Schritt: Resultate visualisieren</em></p>
<p>Mit der <code>plot_model</code> Funktion aus dem <code>sjPlot</code> package können wir uns auch so genannte <em>coefficient plots</em> ausgeben lassen</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">model3 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">plot_model</span>(<span class="dt">show.p =</span> T, <span class="dt">show.values =</span> T, <span class="dt">sort.est =</span> T)</code></pre></div>
<p><img src="index_files/figure-html/unnamed-chunk-81-1.png" width="576" style="display: block; margin: auto;" /></p>
<p>Aber auch die Regressionsgerade:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">model3 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">plot_model</span>(<span class="dt">terror_type =</span> <span class="st">&quot;pred&quot;</span>, <span class="dt">terms =</span> <span class="st">&quot;radicalization&quot;</span>)</code></pre></div>
<p><img src="index_files/figure-html/unnamed-chunk-82-1.png" width="576" style="display: block; margin: auto;" /></p>
<p>Diesen Effekt können wir auch weiter aufteilen nach krimineller Vergangenheit:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">model3 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">plot_model</span>(<span class="dt">terror_type =</span> <span class="st">&quot;pred&quot;</span>, <span class="dt">terms =</span> <span class="kw">c</span>(<span class="st">&quot;radicalization&quot;</span>, <span class="st">&quot;crime_history&quot;</span>))</code></pre></div>
<p><img src="index_files/figure-html/unnamed-chunk-83-1.png" width="576" style="display: block; margin: auto;" /></p>
<h2 id="logistische-regression">Logistische Regression</h2>
<p>Auch logistische Regression können einfach geschätzt werden. Hier ein weiteres Modell, bei dem wir versuchen werden zu erklären wann ein Extremist Gewalt anwendet (<em>violent</em>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">glm1 &lt;-<span class="st"> </span><span class="kw">glm</span>(violent <span class="op">~</span><span class="st"> </span>unemployed <span class="op">+</span><span class="st"> </span>married <span class="op">+</span><span class="st"> </span>
<span class="st">              </span>age <span class="op">+</span><span class="st"> </span>male <span class="op">+</span><span class="st"> </span>mental <span class="op">+</span><span class="st"> </span>
<span class="st">              </span>crime_history <span class="op">+</span><span class="st"> </span>clique <span class="op">+</span><span class="st"> </span>radicalization, 
            <span class="dt">data =</span> start_lm, 
            <span class="dt">family =</span> <span class="st">&quot;binomial&quot;</span>)

<span class="kw">summary</span>(glm1)</code></pre></div>
<pre><code>## 
## Call:
## glm(formula = violent ~ unemployed + married + age + male + mental + 
##     crime_history + clique + radicalization, family = &quot;binomial&quot;, 
##     data = start_lm)
## 
## Deviance Residuals: 
##     Min       1Q   Median       3Q      Max  
## -2.3773  -1.1011   0.6552   0.8607   1.6985  
## 
## Coefficients:
##                           Estimate Std. Error z value Pr(&gt;|z|)   
## (Intercept)               0.432772   0.450618   0.960  0.33686   
## unemployed                0.340880   0.273353   1.247  0.21239   
## married                  -0.689700   0.222214  -3.104  0.00191 **
## age                      -0.025707   0.008511  -3.020  0.00252 **
## male                      0.802934   0.315057   2.549  0.01082 * 
## mental                    0.601743   0.283416   2.123  0.03374 * 
## crime_historyNon-Violent  0.470860   0.271657   1.733  0.08304 . 
## crime_historyViolent      0.868966   0.303334   2.865  0.00417 **
## clique                    0.494463   0.204939   2.413  0.01583 * 
## radicalization            0.026425   0.068709   0.385  0.70054   
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 679.59  on 540  degrees of freedom
## Residual deviance: 614.38  on 531  degrees of freedom
##   (379 observations deleted due to missingness)
## AIC: 634.38
## 
## Number of Fisher Scoring iterations: 4</code></pre>
<p>Mit der <code>plot_model</code> Funktion aus dem <code>sjPlot</code> package können wir uns auch so genannte <em>coefficient plots</em> ausgeben lassen</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">glm1 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">plot_model</span>(<span class="dt">show.p =</span> T, <span class="dt">show.values =</span> T, <span class="dt">sort.est =</span> T)  <span class="op">+</span>
<span class="st">  </span>ggthemes<span class="op">::</span><span class="kw">theme_hc</span>() <span class="op">+</span>
<span class="st">  </span>ggthemes<span class="op">::</span><span class="kw">scale_colour_hc</span>()</code></pre></div>
<p><img src="index_files/figure-html/unnamed-chunk-85-1.png" width="576" style="display: block; margin: auto;" /></p>
<p><strong>Vorhergesagte Wahrscheinlichkeit für kriminelle Vergangenheit</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(sjPlot)
glm1 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">plot_model</span>(<span class="dt">terror_type =</span> <span class="st">&quot;eff&quot;</span>, <span class="dt">terms =</span> <span class="st">&quot;crime_historyViolent&quot;</span>) <span class="op">+</span>
<span class="st">  </span>ggthemes<span class="op">::</span><span class="kw">scale_colour_gdocs</span>() <span class="op">+</span>
<span class="st">  </span>ggthemes<span class="op">::</span><span class="kw">theme_gdocs</span>()</code></pre></div>
<p><img src="index_files/figure-html/unnamed-chunk-86-1.png" width="576" style="display: block; margin: auto;" /></p>
<p><strong>Vorhergesagte Wahrscheinlichkeit für kriminelle Vergangenheit und Beziehungssatus</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">glm1 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">plot_model</span>(<span class="dt">terror_type =</span> <span class="st">&quot;eff&quot;</span>, <span class="dt">terms =</span> <span class="kw">c</span>(<span class="st">&quot;crime_historyViolent&quot;</span>, <span class="st">&quot;married&quot;</span>)) <span class="op">+</span>
<span class="st">  </span>ggthemes<span class="op">::</span><span class="kw">theme_fivethirtyeight</span>() <span class="op">+</span>
<span class="st">  </span>ggthemes<span class="op">::</span><span class="kw">scale_colour_fivethirtyeight</span>()</code></pre></div>
<p><img src="index_files/figure-html/unnamed-chunk-87-1.png" width="576" style="display: block; margin: auto;" /></p>
<p><strong>Vorhergesagte Wahrscheinlichkeit für kriminelle Vergangenheit und Familienstatus</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">glm1 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">plot_model</span>(<span class="dt">terror_type =</span> <span class="st">&quot;eff&quot;</span>, <span class="dt">terms =</span> <span class="kw">c</span>(<span class="st">&quot;crime_historyViolent&quot;</span>, <span class="st">&quot;male&quot;</span>, <span class="st">&quot;married&quot;</span>))</code></pre></div>
<p><img src="index_files/figure-html/unnamed-chunk-88-1.png" width="576" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
<div id="#about" class="ui tab tab-pane container" role="tabpanel" style="height: 100%;" data-tab="about">
<div class="ui padded grid">
<div class="sixteen wide column">
<p><br> <br> <img class="ui centered medium circular image" src="images/both.jpeg"></p>
<h3 class="ui center aligned header">
<div class="content">
<i class="red map marker icon"></i> UseR!2017 Brussels <i class="belgium flag"></i>
</div>
</h3>
<p><br></p>
<div class="ui grid">
<div class="row">
<div class="four wide column">

</div>
<div class="four wide column">
<div class="ui right aligned card">
<div class="content">
<div class="header">
Simon Roth
</div>
<div class="description">
PhD Student in statistical analysis
</div>
</div>
<div class="extra content">
<a target="_blank" href = "http://www.systats.eu/"> <i class="web icon"></i> www.systats.eu </a>
</div>
</div>
</div>
<div class="four wide column">
<div class="ui left aligned card">
<div class="content">
<div class="header">
Fabio Votta
</div>
<div class="description">
Tutor and Master of Statistics
</div>
</div>
<div class="extra content">
<a target="_blank" href = "http://www.favstats.eu/"> <i class="web icon"></i> www.favstats.eu </a> <br> <a target="_blank" href = "https://www.facebook.com/Rmemes0/"> <i class="web icon"></i> R Memes For Statistical Fiends </a>
</div>
</div>
</div>
<div class="four wide column">

</div>
</div>
</div>
<br> <br>
<div class="row" align="center">
<div class="ui centered stackable grid">
<div class="two wide column">
<p><a href=""><img class="ui centered small image" src="images/logo.png"></a></p>
</div>
<div class="five wide column">
<h4 class="ui left aligned header">
Proudly sponsored by
</h4>
<p><a href="https://www.r-consortium.org/" target="_blank"><img class="ui centered medium image" src="images/rconsortium.png"></a></p>
</div>
<div class="two wide column">
<p><a href="http://foeps-uni-stuttgart.de/news/" target="_blank"><img class="ui centered small image" src="images/foeps.png"></a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<script>  
    var set_pusher_size = function(on_click) {
      var sidebar = $('#uisidebar');
      var window_width = $(window).width();
      var pusher = $('.container > .pusher');
      var is_sidebar_visible_after_transition = sidebar.hasClass('visible')
      if (on_click) {
        is_sidebar_visible_after_transition = !is_sidebar_visible_after_transition
      };
      if (is_sidebar_visible_after_transition) {sidebar_width = sidebar.width()} else {sidebar_width = 0};
      if (sidebar.hasClass('left')) {margin_left = sidebar_width} else {margin_left = 0};
      if (sidebar.hasClass('right')) {margin_right = sidebar_width} else {margin_right = 0};
      pusher.width(window_width - sidebar_width);
      pusher.css({'margin-left' : margin_left, 'margin-right' : margin_right});
    };
    $('#toggle_menu').click(function() {set_pusher_size(true)});
    $(document).ready(function() {set_pusher_size(false)});
    $(window).resize(function() {set_pusher_size(false)});
</script>
<script>
    /* Code below is needed to trigger visibility on reactive Shiny outputs. */
    /* Thanks to that users do not have to set suspendWhenHidden to FALSE.   */
    var previous_tab;
    $('#uisidebar .item').tab({
      onVisible: function(target) {
        if (previous_tab) {
          $(this).trigger('hidden');
        }
        $(window).resize();
        $(this).trigger('shown');
        previous_tab = this;
      }
    });
    $('#uisidebar')
    .sidebar({
      context: $('.pusher'),
      transition: 'push',
      dimPage: false,
      closable: false
    })
    .sidebar('attach events', '#toggle_menu');
</script>
</div>
</div>
</div>
</div>


<!-- dynamically load mathjax for compatibility with self-contained -->
<!--<script async src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"async></script>-->

<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

<!-- -->
</body>
</html>
